#+BEGIN_COMMENT
.. title: 为什么条件变量需要与互斥锁配合使用
.. slug: why-condition-variable-requires-mutex
.. date: 2019-05-20 10:38:41 UTC+08:00
.. tags: cpp, cpp11, thread, mutex, condition variable
.. category: cpp
.. link:
.. description:
.. type: text
.. status: draft
#+END_COMMENT
#+OPTIONS: num:t

#+TITLE: 为什么条件变量需要与互斥锁配合使用

条件变量（condition variable）是常用的线程同步技术，通常与互斥锁搭配使用。但是为什么需要一个互斥锁配合其使用呢？

{{{TEASER_END}}}


Even if the shared variable is atomic, it must be modified under the mutex in order to correctly publish the modification to the waiting thread.

** 参考资料
- https://stackoverflow.com/questions/2763714/why-do-pthreads-condition-variable-functions-require-a-mutex
- https://stackoverflow.com/questions/46088363/why-does-stdcondition-variablewait-need-mutex
- https://en.cppreference.com/w/cpp/thread/condition_variable
