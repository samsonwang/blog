<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Personal handnote on software development">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Hack Note (old posts, page 2) | Hack Note</title>
<link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="/assets/css/code.css" rel="stylesheet" type="text/css">
<link href="/assets/css/colorbox.css" rel="stylesheet" type="text/css">
<link href="/assets/css/highlight.css" rel="stylesheet" type="text/css">
<link href="/assets/css/cerulean.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="/rss.xml">
<link rel="canonical" href="https://samsonwang.me/index-2.html">
<link rel="icon" href="/favicon.ico" sizes="64x64">
<link rel="prev" href="/index-1.html" type="text/html">
<link rel="next" href="/index-3.html" type="text/html">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]-->
</head>
<body class="preload">
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->
<nav id="top-nav" class="navbar navbar-expand-md fixed-top mb-4 navbar-dark bg-dark"><div class="container">   <!-- This keeps the margins nice -->
    <a class="navbar-brand" href="https://samsonwang.me/">

      <span id="blog-title">Hack Note</span>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="bs-navbar">
      <ul class="navbar-nav ml-auto">
<li class="nav-item">
<a href="/archive/" class="nav-link">Archives</a>
                </li>
<li class="nav-item">
<a href="/tags/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="/rss.xml" class="nav-link">RSS Feed</a>

        
      </li>
</ul>
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
  </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
  <div class="body-content">
    <!--Body content-->
    <div class="row">

      <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
        
        


  



  


<div class="postindex">
  <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="/posts/algorithm-weekly-three-sum-closest/" class="u-url">每周算法：最接近的三数之和</a></h1>
      <div class="metadata">
        

        
  <div class="date blur-1">
    <time class="published dt-published" datetime="2018-09-16T16:44:14+08:00" itemprop="datePublished" title="2018-09-16 16:44">Sep 16 2018  (16:44)
    </time>
</div>

        
    <div class="comment blur-1">
      
        
    <a href="/posts/algorithm-weekly-three-sum-closest/#disqus_thread" data-disqus-identifier="cache/posts/algorithm-weekly-three-sum-closest.html">Comments</a>


    </div>

        
    <div class="tags blur-2">
    <ul itemprop="keywords">
<li><a class="tag p-category" href="/tags/algorithm/" rel="tag">algorithm</a></li>
        <li><a class="tag p-category" href="/tags/leetcode/" rel="tag">leetcode</a></li>
    </ul>
</div>

      </div>
    </header><div class="p-summary entry-summary">
      <div id="outline-container-orgd3c920a" class="outline-2">
<h2 id="orgd3c920a">Description</h2>
<div class="outline-text-2" id="text-orgd3c920a">
<p>
Given an array nums of n integers and an integer target, find three integers in nums such that the sum is closest to target. Return the sum of the three integers. You may assume that each input would have exactly one solution.<br></p>

<p>
<b>Example:</b><br></p>
<pre class="example">
Given array nums = [-1, 2, 1, -4], and target = 1.
The sum that is closest to the target is 2. (-1 + 2 + 1 = 2).
</pre>

<p>
来源：<a href="https://leetcode.com/problems/3sum-closest/description/">leetcode 16 3um closest</a><br></p>
</div>
</div>

<div id="outline-container-orgcee464b" class="outline-2">
<h2 id="orgcee464b">Solution</h2>
<div class="outline-text-2" id="text-orgcee464b">
</div>
<div id="outline-container-org1d59750" class="outline-3">
<h3 id="org1d59750">Approach 1</h3>
<div class="outline-text-3" id="text-org1d59750">
<p>
这道题与之前的“3Sum”十分类似，做起来思路是非常相似的，最容易想到的就是暴力解法，穷举出所有的组合，进而找出最接近的。<br></p>

<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">threeSumClosest</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">diff</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">target</span> <span class="o">-</span> <span class="n">ans</span><span class="p">);</span>

    <span class="c1">// 穷举出所有的组合，与target比较，找到最接近的</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
	    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">k</span><span class="p">)</span> <span class="p">{</span>
		<span class="kt">int</span> <span class="n">sum_t</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">];</span>
		<span class="kt">int</span> <span class="n">diff_t</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">target</span> <span class="o">-</span> <span class="n">sum_t</span><span class="p">);</span>

		<span class="n">ans</span> <span class="o">=</span> <span class="n">diff_t</span> <span class="o">&lt;</span> <span class="n">diff</span> <span class="o">?</span> <span class="p">(</span><span class="n">diff</span> <span class="o">=</span> <span class="n">diff_t</span><span class="p">,</span> <span class="n">sum_t</span><span class="p">)</span> <span class="o">:</span> <span class="n">ans</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">ans</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
		    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
		<span class="p">}</span>
	    <span class="p">}</span>
	<span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>

<div id="outline-container-org1d12aa4" class="outline-3">
<h3 id="org1d12aa4">Approach 2</h3>
<div class="outline-text-3" id="text-org1d12aa4">
<p>
套用之前“3Sum”的O(n<sup>2</sup>)解法，下面的解法也是很容易想到的。<br></p>
<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">threeSumClosest</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">sort</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">nums</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>

    <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">nums</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">diff</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">target</span> <span class="o">-</span> <span class="n">ans</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">n1</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">front</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

	<span class="k">while</span> <span class="p">(</span><span class="n">front</span> <span class="o">&lt;</span> <span class="n">end</span><span class="p">)</span> <span class="p">{</span>
	    <span class="kt">int</span> <span class="n">n2</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">front</span><span class="p">];</span>
	    <span class="kt">int</span> <span class="n">n3</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">end</span><span class="p">];</span>
	    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span><span class="p">;</span>
	    <span class="kt">int</span> <span class="n">diff_t</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">target</span> <span class="o">-</span> <span class="n">sum</span><span class="p">);</span>

	    <span class="k">if</span> <span class="p">(</span><span class="n">diff</span> <span class="o">&gt;</span> <span class="n">diff_t</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">ans</span> <span class="o">=</span> <span class="n">sum</span><span class="p">;</span>
		<span class="n">diff</span> <span class="o">=</span> <span class="n">diff_t</span><span class="p">;</span>
	    <span class="p">}</span>

	    <span class="k">if</span> <span class="p">(</span><span class="n">sum</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">return</span> <span class="n">sum</span><span class="p">;</span>
	    <span class="p">}</span>
	    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">sum</span> <span class="o">&gt;</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
		<span class="o">--</span><span class="n">end</span><span class="p">;</span>
	    <span class="p">}</span>
	    <span class="k">else</span> <span class="p">{</span>
		<span class="o">++</span><span class="n">front</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>

<div id="outline-container-orga56a631" class="outline-2">
<h2 id="orga56a631">Reference</h2>
<div class="outline-text-2" id="text-orga56a631">
<ul class="org-ul">
<li>
<a href="https://leetcode.com/problems/3sum/description/">leetcode 3 Sum</a><br>
</li>
<li>
<a href="/posts/algorithm-weekly-three-sum/">my old post - 3 Sum</a><br>
</li>
</ul>
</div>
</div>
    </div>

  </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="/posts/using-regexp-in-linux-shell/" class="u-url">在shell中使用正则表达式</a></h1>
      <div class="metadata">
        

        
  <div class="date blur-1">
    <time class="published dt-published" datetime="2018-09-16T09:47:01+08:00" itemprop="datePublished" title="2018-09-16 09:47">Sep 16 2018  (09:47)
    </time>
</div>

        
    <div class="comment blur-1">
      
        
    <a href="/posts/using-regexp-in-linux-shell/#disqus_thread" data-disqus-identifier="cache/posts/using-regexp-in-linux-shell.html">Comments</a>


    </div>

        
    <div class="tags blur-2">
    <ul itemprop="keywords">
<li><a class="tag p-category" href="/tags/egrep/" rel="tag">egrep</a></li>
        <li><a class="tag p-category" href="/tags/grep/" rel="tag">grep</a></li>
        <li><a class="tag p-category" href="/tags/liunx/" rel="tag">liunx</a></li>
        <li><a class="tag p-category" href="/tags/shell/" rel="tag">shell</a></li>
    </ul>
</div>

      </div>
    </header><div class="p-summary entry-summary">
      <div id="outline-container-org2fe8192" class="outline-2">
<h2 id="org2fe8192">引言</h2>
<div class="outline-text-2" id="text-org2fe8192">
<p>
本篇文章主要是针对shell中的 <code>grep</code> 和 <code>egrep</code> 的讲解，对于正则表达式的规则本身并没有太多的内容。在阅读本篇文章之前，读者应该对正则表达式有个大致的了解。<br></p>
</div>
</div>

<div id="outline-container-orgf449f26" class="outline-2">
<h2 id="orgf449f26">
<code>grep</code> 命令</h2>
<div class="outline-text-2" id="text-orgf449f26">
<p>
<code>grep</code> 命令是linux终端中最常用的命令之一，它的全称是“global regular expression print”，从字面上理解， <code>grep</code> 可以用来进行正则表达式匹配。<br></p>

<p>
<b>常用选项</b><br>
使用一些选项命令能够更加方便地进行匹配<br><code>-i</code> 忽略大小写<br><code>-v</code> 进行逆向匹配<br><code>-n</code> 打印行号<br><code>--color=auto</code> 彩色输出结果<br></p>

<p>
<b>支持的表达式</b><br>
正则表达式有很多规则， <code>grep</code> 支持的有如下：<br>
在每一行的开始<br></p>
<div class="highlight"><pre><span></span>grep <span class="s2">"^GUN"</span> GPL-3
</pre></div>

<p>
在每一行的结尾<br></p>
<div class="highlight"><pre><span></span>grep <span class="s2">"and</span>$<span class="s2">"</span> GPL-3
</pre></div>

<p>
匹配任意字符<br></p>
<div class="highlight"><pre><span></span>grep <span class="s2">"..cept"</span> GPL-3
</pre></div>

<p>
在指定的字符中进行匹配<br></p>
<div class="highlight"><pre><span></span>grep <span class="s2">"t[wo]o"</span> GPL-3
</pre></div>

<p>
在指定的字符中进行逆向匹配<br></p>
<div class="highlight"><pre><span></span>grep <span class="s2">"[^c]ode"</span> GPL-3
</pre></div>

<p>
使用范围来指定字符<br></p>
<div class="highlight"><pre><span></span>grep <span class="s2">"^[A-Z]"</span> GPL-3
</pre></div>

<p>
限定出现的次数为0次或0次以上<br></p>
<div class="highlight"><pre><span></span>grep <span class="s2">"([A-Za-z ]*)"</span> GPL-3
</pre></div>
</div>
</div>

<div id="outline-container-org95d9698" class="outline-2">
<h2 id="org95d9698">
<code>egrep</code> 命令</h2>
<div class="outline-text-2" id="text-org95d9698">
<p>
<code>egrep</code> 的含义为“extended grep”，相对于 <code>grep</code> 有更多的正则表达式特性。同样，可以在使用 <code>grep</code> 时增加 <code>-E</code> 参数获得相同的效果。<br></p>

<p>
<b>表达式分组</b><br>
使用括号能够将表达式进行分组，下面的任何一个都能够实现这个效果<br></p>
<div class="highlight"><pre><span></span>grep <span class="s2">"\(grouping\)"</span> file.txt
grep -E <span class="s2">"(grouping)"</span> file.txt
egrep <span class="s2">"(grouping)"</span> file.txt
</pre></div>

<p>
表达式进行中多选一<br></p>
<div class="highlight"><pre><span></span>egrep <span class="s2">"(GPL|General Public License)"</span> GPL-3
</pre></div>

<p>
匹配的重复次数为0次或0次以上，与 <code>*</code> 限定符类似，但是 <code>?</code> 可以作用于一组字符<br></p>
<div class="highlight"><pre><span></span>egrep <span class="s2">"(copy)?right"</span> GPL-3
</pre></div>

<p>
指定匹配的重复次数<br></p>
<div class="highlight"><pre><span></span>egrep <span class="s2">"[AEIOUaeiou]{3}"</span> GPL-3
</pre></div>
</div>
</div>


<div id="outline-container-orgc6c75e4" class="outline-2">
<h2 id="orgc6c75e4">参考资料</h2>
<div class="outline-text-2" id="text-orgc6c75e4">
<ul class="org-ul">
<li>
<a href="https://www.digitalocean.com/community/tutorials/using-grep-regular-expressions-to-search-for-text-patterns-in-linux">digital ocean - grep tutorial</a><br>
</li>
<li>
<a href="http://man7.org/linux/man-pages/man1/grep.1.html">linux man page</a><br>
</li>
</ul>
</div>
</div>
    </div>

  </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="/posts/compares-between-thread-and-process/" class="u-url">线程与进程的比较</a></h1>
      <div class="metadata">
        

        
  <div class="date blur-1">
    <time class="published dt-published" datetime="2018-09-14T09:51:15+08:00" itemprop="datePublished" title="2018-09-14 09:51">Sep 14 2018  (09:51)
    </time>
</div>

        
    <div class="comment blur-1">
      
        
    <a href="/posts/compares-between-thread-and-process/#disqus_thread" data-disqus-identifier="cache/posts/compares-between-thread-and-process.html">Comments</a>


    </div>

        
    <div class="tags blur-2">
    <ul itemprop="keywords">
<li><a class="tag p-category" href="/tags/computer-science/" rel="tag">computer science</a></li>
        <li><a class="tag p-category" href="/tags/process/" rel="tag">process</a></li>
        <li><a class="tag p-category" href="/tags/thread/" rel="tag">thread</a></li>
    </ul>
</div>

      </div>
    </header><div class="p-summary entry-summary">
      <div id="outline-container-org04c36ad" class="outline-2">
<h2 id="org04c36ad">进程与线程之间有什么区别</h2>
<div class="outline-text-2" id="text-org04c36ad">
<p>
进程（process）是指在系统中正在运行的一个应用程序，是系统资源分配的基本单位，在内存中有其完备的数据空间和代码空间，拥有完整的虚拟空间地址。一个进程所拥有的数据和变量只属于它自己。<br></p>

<p>
线程（thread）是进程内相对独立的可执行单元，所以也被称为轻量进程（lightweight processes）；是操作系统进行任务调度的基本单元。它与父进程的其它线程共享该进程所拥有的全部代码空间和全局变量，但拥有独立的堆栈（即局部变量对于线程来说是私有的）。<br></p>

<p>
进程和线程都具有就绪、阻塞和运行三种基本状态。<br></p>

<p>
<b>联系</b><br></p>
<ul class="org-ul">
<li>一个进程至少拥有一个线程(主线程)，也可以拥有多个线程<br>
</li>
<li>一个线程必须有一个父进程。多个进程可以并发执行<br>
</li>
<li>一个线程可以创建和撤销另一个线程<br>
</li>
<li>同一个进程中的多个线程之间可以并发执行<br>
</li>
</ul>
<p>
<b>区别</b><br>
系统开销：在创建或撤消进程时，由于系统都要为之分配和回收资源，导致系统的开销明显大于创建或撤消线程时的开销<br>
资源管理：进程有独立的地址空间，一个进程崩溃后，在保护模式下不会对其它进程产生影响，而线程只是一个进程中的不同执行路径。线程有自己的堆栈和局部变量，但线程之间没有单独的地址空间，一个线程死掉就等于整个进程死掉，所以多进程的程序要比多线程的程序健壮，但在进程切换时，耗费资源较大，效率要差一些。但对于一些要求同时进行并且又要共享某些变量的并发操作，只能用线程，不能用进程。<br></p>

<p>
<b>通信方式</b><br>
进程间通信主要包括管道、系统IPC(包括消息队列,信号量,共享存储)、SOCKET，具体说明参考linux进程间通信方式。进程间通信其实是指分属于不同进程的线程之间的通讯，所以进程间的通信方法同样适用于线程间的通信。但对应归于同一进程的不同线程来说，使用全局变量进行通信效率会更高。<br></p>
</div>
</div>


<div id="outline-container-orgd16133e" class="outline-2">
<h2 id="orgd16133e">什么情况下适合使用线程</h2>
<div class="outline-text-2" id="text-orgd16133e">
<p>
线程相对于进程的优势：<br></p>
<ul class="org-ul">
<li>线程间通信（数据交互）比进程间通信更加简便快捷<br>
</li>
<li>线程之间的上下文切换速度要比进程间的快，也就是说，对于操作系统而言，停止一个线程并启动另一个线程的速度比进程之间相似操作更快<br>
</li>
<li>创建一个线程的速度比创建一个进程的速度快<br>
</li>
</ul>
<p>
下面的一些情景更适合使用线程来完成：<br></p>
<ul class="org-ul">
<li>进行耗时较长的处理：当一个windows界面程序正在计算时，它就不能处理其他消息（message）了，界面就不能及时更新<br>
</li>
<li>进行后台处理：有些任务并不是时间紧迫的，但是需要定期执行<br>
</li>
<li>进行 <code>I/O</code> 处理： <code>I/O</code> 操作或网络操作一般都会有一定的延迟，线程能保证程序中的其他部分不会受到延迟的影响。<br>
</li>
</ul>
</div>
</div>

<div id="outline-container-org6f4bbfd" class="outline-2">
<h2 id="org6f4bbfd">什么情况下适合使用进程</h2>
<div class="outline-text-2" id="text-org6f4bbfd">
<p>
进程相对于线程的优势：<br></p>
<ul class="org-ul">
<li>多线程系单进程的软件只能运行在一台机器上，而多进程的软件可以运行在多台机器上。这在一定程度上限制软件的可拓展性，单台机器的性能总是有限的<br>
</li>
<li>多进程模型的鲁棒性更好，有更好的容错性。运行在同一进程下的多个线程会相互影响，如果其中的一个线程出了问题，可能会波及整个进程<br>
</li>
<li>有些功能模块并不是线程安全的，这时就只能使用多进程模型了<br>
</li>
</ul>
<p>
以chrome浏览器为例，它使用了多进程模型。每一个标签页都是一个进程，这样能够将渲染引擎中的bug隔离在该进程内，从而使整个程序免受影响。多进程模型将JavaScript隔离在每个进程中，这样就能防止其因占用过多的CPU或内存，使整个进程失去响应。另一方面，多进程模型的系统开销也是比较大的，这点能够从chrome的高额内存使用中看出来。不过chrome的优化策略可以让较低内存的情况下有更好内存使用效率。当一个标签页处于非激活状态，其对应的内存可以在需要时被交换进硬盘中，这样用户当前操作的页面就能够保持响应状态。如果使用的是多线程模型，区分活跃内存和非活跃内存就变得十分困难，导致内存和性能的下降。<br></p>
</div>
</div>


<div id="outline-container-org8640bb1" class="outline-2">
<h2 id="org8640bb1">参考资料</h2>
<div class="outline-text-2" id="text-org8640bb1">
<ul class="org-ul">
<li>
<a href="https://www.backblaze.com/blog/whats-the-diff-programs-processes-and-threads/">backblaze.com - difference between process and thread</a><br>
</li>
<li>
<a href="https://docs.microsoft.com/zh-cn/windows/desktop/ProcThread/about-processes-and-threads">msdn - about processes and threads</a><br>
</li>
<li>
<a href="https://blog.csdn.net/xiexievv/article/details/7294189">csdn - blog</a><br>
</li>
<li>
<a href="https://stackoverflow.com/questions/617787/why-should-i-use-a-thread-vs-using-a-process">stackoverflow - why should I use thread vs process</a><br>
</li>
<li>
<a href="https://blog.chromium.org/2008/09/multi-process-architecture.html">chromium blog - multi process architecture</a><br>
</li>
</ul>
</div>
</div>
    </div>

  </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="/posts/algorithm-weekly-three-sum/" class="u-url">每周算法：三数之和</a></h1>
      <div class="metadata">
        

        
  <div class="date blur-1">
    <time class="published dt-published" datetime="2018-09-10T16:14:02+08:00" itemprop="datePublished" title="2018-09-10 16:14">Sep 10 2018  (16:14)
    </time>
</div>

        
    <div class="comment blur-1">
      
        
    <a href="/posts/algorithm-weekly-three-sum/#disqus_thread" data-disqus-identifier="cache/posts/algorithm-weekly-three-sum.html">Comments</a>


    </div>

        
    <div class="tags blur-2">
    <ul itemprop="keywords">
<li><a class="tag p-category" href="/tags/algorithm/" rel="tag">algorithm</a></li>
        <li><a class="tag p-category" href="/tags/leetcode/" rel="tag">leetcode</a></li>
    </ul>
</div>

      </div>
    </header><div class="p-summary entry-summary">
      <div id="outline-container-org48c2cb0" class="outline-2">
<h2 id="org48c2cb0">Description</h2>
<div class="outline-text-2" id="text-org48c2cb0">
<p>
Given an array nums of n integers, are there elements a, b, c in nums such that a + b + c = 0? Find all unique triplets in the array which gives the sum of zero.<br></p>

<p>
<b>Note:</b><br>
The solution set must not contain duplicate triplets.<br></p>

<p>
<b>Example:</b><br></p>
<pre class="example">
Given array nums = [-1, 0, 1, 2, -1, -4],

A solution set is:
[
  [-1, 0, 1],
  [-1, -1, 2]
]
</pre>

<p>
来源：<a href="https://leetcode.com/problems/3sum/description/">leetcode.com 15 3Sum</a><br></p>
</div>
</div>

<div id="outline-container-org5845900" class="outline-2">
<h2 id="org5845900">Solution</h2>
<div class="outline-text-2" id="text-org5845900">
</div>
<div id="outline-container-orgf0ed5a3" class="outline-3">
<h3 id="orgf0ed5a3">Approach 1</h3>
<div class="outline-text-3" id="text-orgf0ed5a3">
<p>
这道题有点难度，第一时间没有什么思路。我想到的主要问题是如何保证返回结果中不包含重复的一组数。如果使用暴力解法，将所有满足条件的组合取到后进行重复性清洗，应该是一种可行的解法，只是这样做时间复杂度有点高。<br></p>

<p>
下面的代码就是暴力解法的实现。不出意外，在leetcode中结果为超时。这种算法的时间复杂度为 <code>O(n^3 * nlogn) + O(n^2)</code> 。<br></p>
<div class="highlight"><pre><span></span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">threeSum</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">ans</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">n1</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
	    <span class="kt">int</span> <span class="n">n2</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
	    <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">k</span><span class="o">=</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">k</span><span class="o">&lt;</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">k</span><span class="p">)</span> <span class="p">{</span>
		<span class="kt">int</span> <span class="n">n3</span> <span class="o">=</span> <span class="n">nums</span><span class="p">[</span><span class="n">k</span><span class="p">];</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">n1</span> <span class="o">+</span> <span class="n">n2</span> <span class="o">+</span> <span class="n">n3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
		    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">triplet</span><span class="p">{</span><span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">};</span>
		    <span class="n">sort</span><span class="p">(</span><span class="n">triplet</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">triplet</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
		    <span class="n">ans</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">triplet</span><span class="p">);</span>
		<span class="p">}</span>
	    <span class="p">}</span>
	<span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// 将结果中的重复组合删掉</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;::</span><span class="n">iterator</span> <span class="n">it1</span> <span class="o">=</span> <span class="n">ans</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
	 <span class="n">it1</span> <span class="o">!=</span> <span class="n">ans</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it1</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;::</span><span class="n">iterator</span> <span class="n">it2</span><span class="o">=</span><span class="n">it1</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">it2</span><span class="o">!=</span><span class="n">ans</span><span class="p">.</span><span class="n">end</span><span class="p">();)</span> <span class="p">{</span>
	    <span class="k">if</span> <span class="p">(</span><span class="o">*</span><span class="n">it1</span> <span class="o">==</span> <span class="o">*</span><span class="n">it2</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">it2</span> <span class="o">=</span> <span class="n">ans</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">it2</span><span class="p">);</span>
	    <span class="p">}</span>
	    <span class="k">else</span> <span class="p">{</span>
		<span class="o">++</span><span class="n">it2</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>
从上面这个解法中，我能够得到的 <del>教训</del> 经验是对 <code>vector</code> 进行具有删除操作的循环时，使用迭代器完成更不容易出错。我之前的去重逻辑是这样的。<br></p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">ans</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">ans</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">ans</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
	    <span class="n">ans</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">ans</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="o">+</span> <span class="n">j</span><span class="p">);</span>
	<span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>
很显然，上面的代码在一些情况下并不能彻底删去所有重复的元素，下面的代码才是真正正确的实现。<br></p>
<div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">ans</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">ans</span><span class="p">.</span><span class="n">size</span><span class="p">();)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">ans</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">ans</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
	    <span class="n">ans</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">ans</span><span class="p">.</span><span class="n">begin</span><span class="p">()</span> <span class="o">+</span> <span class="n">j</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="k">else</span> <span class="p">{</span>
	    <span class="o">++</span><span class="n">j</span><span class="p">;</span>
	<span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgd9f40c3" class="outline-3">
<h3 id="orgd9f40c3">Approach 2</h3>
<div class="outline-text-3" id="text-orgd9f40c3">
<p>
我认为这到题的主要难点啊主要是在去除重复的问题上。下面的解法来自 <a href="https://leetcode.com/problems/3sum/discuss/7402/Share-my-AC-C++-solution-around-50ms-O(N*N)-with-explanation-and-comments">leetcode</a> ，在处理重复性问题时，在匹配答案时将重复的数字跳过，这样就不用在后续的结果中进行剔除重复元素的步骤了。<br></p>

<div class="highlight"><pre><span></span><span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">threeSum</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">)</span> <span class="p">{</span>

    <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">num</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">num</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>

    <span class="n">vector</span><span class="o">&lt;</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">res</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

	<span class="kt">int</span> <span class="n">target</span> <span class="o">=</span> <span class="o">-</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
	<span class="kt">int</span> <span class="n">front</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">back</span> <span class="o">=</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

	<span class="k">while</span> <span class="p">(</span><span class="n">front</span> <span class="o">&lt;</span> <span class="n">back</span><span class="p">)</span> <span class="p">{</span>

	    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">num</span><span class="p">[</span><span class="n">front</span><span class="p">]</span> <span class="o">+</span> <span class="n">num</span><span class="p">[</span><span class="n">back</span><span class="p">];</span>

	    <span class="c1">// Finding answer which start from number num[i]</span>
	    <span class="k">if</span> <span class="p">(</span><span class="n">sum</span> <span class="o">&lt;</span> <span class="n">target</span><span class="p">)</span>
		<span class="n">front</span><span class="o">++</span><span class="p">;</span>

	    <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">sum</span> <span class="o">&gt;</span> <span class="n">target</span><span class="p">)</span>
		<span class="n">back</span><span class="o">--</span><span class="p">;</span>

	    <span class="k">else</span> <span class="p">{</span>
		<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">triplet</span> <span class="o">=</span> <span class="p">{</span><span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">front</span><span class="p">],</span> <span class="n">num</span><span class="p">[</span><span class="n">back</span><span class="p">]};</span>
		<span class="n">res</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">triplet</span><span class="p">);</span>

		<span class="c1">// Processing duplicates of Number 2</span>
		<span class="c1">// Rolling the front pointer to the next different number forwards</span>
		<span class="k">while</span> <span class="p">(</span><span class="n">front</span> <span class="o">&lt;</span> <span class="n">back</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">front</span><span class="p">]</span> <span class="o">==</span> <span class="n">triplet</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
		    <span class="o">++</span><span class="n">front</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="p">}</span>

	<span class="c1">// Processing duplicates of Number 1</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">num</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
	    <span class="o">++</span><span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>
上面的代码中，只需要跳过 <code>front</code> 所对应的数字就好，因为 <code>back</code> 对应的数字会自然地随 <code>front</code> 变化而变化。<br></p>
</div>
</div>
</div>


<div id="outline-container-org25e0b2b" class="outline-2">
<h2 id="org25e0b2b">Reference</h2>
<div class="outline-text-2" id="text-org25e0b2b">
<ul class="org-ul">
<li>
<a href="https://leetcode.com/problems/3sum/discuss/7402/Share-my-AC-C++-solution-around-50ms-O(N*N)-with-explanation-and-comments">leetcode.com discuss</a><br>
</li>
</ul>
</div>
</div>
    </div>

  </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="/posts/algorithm-weekly-roman-to-integer/" class="u-url">每周算法：罗马数字转阿拉伯数字</a></h1>
      <div class="metadata">
        

        
  <div class="date blur-1">
    <time class="published dt-published" datetime="2018-09-07T13:01:05+08:00" itemprop="datePublished" title="2018-09-07 13:01">Sep 07 2018  (13:01)
    </time>
</div>

        
    <div class="comment blur-1">
      
        
    <a href="/posts/algorithm-weekly-roman-to-integer/#disqus_thread" data-disqus-identifier="cache/posts/algorithm-weekly-roman-to-integer.html">Comments</a>


    </div>

        
    <div class="tags blur-2">
    <ul itemprop="keywords">
<li><a class="tag p-category" href="/tags/algorithm/" rel="tag">algorithm</a></li>
        <li><a class="tag p-category" href="/tags/leetcode/" rel="tag">leetcode</a></li>
    </ul>
</div>

      </div>
    </header><div class="p-summary entry-summary">
      <div id="outline-container-org33d2c27" class="outline-2">
<h2 id="org33d2c27">Description</h2>
<div class="outline-text-2" id="text-org33d2c27">
<p>
Roman numerals are represented by seven different symbols: I, V, X, L, C, D and M.<br></p>

<pre class="example">
Symbol       Value
I             1
V             5
X             10
L             50
C             100
D             500
M             1000
</pre>

<p>
For example, two is written as <code>II</code> in Roman numeral, just two one's added together. Twelve is written as, <code>XII</code> , which is simply <code>X</code> + <code>II</code> . The number twenty seven is written as <code>XXVII</code> , which is <code>XX</code> + <code>V</code> + <code>II</code> .<br></p>

<p>
Roman numerals are usually written largest to smallest from left to right. However, the numeral for four is not <code>IIII</code> . Instead, the number four is written as <code>IV</code> . Because the one is before the five we subtract it making four. The same principle applies to the number nine, which is written as <code>IX</code> . There are six instances where subtraction is used:<br></p>

<p>
<code>I</code> can be placed before <code>V</code> (5) and <code>X</code> (10) to make 4 and 9.<br><code>X</code> can be placed before <code>L</code> (50) and <code>C</code> (100) to make 40 and 90.<br><code>C</code> can be placed before <code>D</code> (500) and <code>M</code> (1000) to make 400 and 900.<br>
Given a roman numeral, convert it to an integer. Input is guaranteed to be within the range from 1 to 3999.<br></p>

<p>
<b>Example 1:</b><br></p>
<pre class="example">
Input: "III"
Output: 3
</pre>

<p>
<b>Example 2:</b><br></p>
<pre class="example">
Input: "IV"
Output: 4
</pre>

<p>
<b>Example 3:</b><br></p>
<pre class="example">
Input: "IX"
Output: 9
</pre>

<p>
<b>Example 4:</b><br></p>
<pre class="example">
Input: "LVIII"
Output: 58
Explanation: C = 100, L = 50, XXX = 30 and III = 3.
</pre>

<p>
<b>Example 5:</b><br></p>
<pre class="example">
Input: "MCMXCIV"
Output: 1994
Explanation: M = 1000, CM = 900, XC = 90 and IV = 4.
</pre>

<p>
来源：<a href="https://leetcode.com/problems/roman-to-integer/description/">leetcode 13 roman to integer</a><br></p>
</div>
</div>

<div id="outline-container-org7cb8346" class="outline-2">
<h2 id="org7cb8346">Solution</h2>
<div class="outline-text-2" id="text-org7cb8346">
</div>
<div id="outline-container-org90724ce" class="outline-3">
<h3 id="org90724ce">Approach 1</h3>
<div class="outline-text-3" id="text-org90724ce">
<p>
这道题不是很难，很容易就能想到解法，需要注意好边界条件问题，下面就是我的解法。<br></p>
<div class="highlight"><pre><span></span><span class="n">pint</span> <span class="nf">romanToInt</span><span class="p">(</span><span class="n">string</span> <span class="n">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">const</span> <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>

    <span class="c1">// 千位</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'M'</span><span class="p">)</span> <span class="p">{</span>
	<span class="o">++</span><span class="n">pos</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">ans</span> <span class="o">+=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="n">pos</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">pos</span> <span class="o">==</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 百位</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">])</span> <span class="p">{</span>
    <span class="k">case</span> <span class="sc">'C'</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="mi">100</span><span class="p">;</span>
	<span class="o">++</span><span class="n">pos</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'D'</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="mi">300</span><span class="p">;</span>
	    <span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'M'</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="mi">800</span><span class="p">;</span>
	    <span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span> <span class="p">{</span>
	    <span class="k">while</span> <span class="p">(</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'C'</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">ans</span> <span class="o">+=</span> <span class="mi">100</span><span class="p">;</span>
		<span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="p">}</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="sc">'D'</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="mi">500</span><span class="p">;</span>
	<span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'C'</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="mi">100</span><span class="p">;</span>
	    <span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">default</span><span class="o">:</span>
	<span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">pos</span> <span class="o">==</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 十位</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">])</span> <span class="p">{</span>
    <span class="k">case</span> <span class="sc">'X'</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="mi">10</span><span class="p">;</span>
	<span class="o">++</span><span class="n">pos</span><span class="p">;</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'C'</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="mi">80</span><span class="p">;</span>
	    <span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'L'</span><span class="p">){</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="mi">30</span><span class="p">;</span>
	    <span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span> <span class="p">{</span>
	    <span class="k">while</span> <span class="p">(</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'X'</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">ans</span> <span class="o">+=</span> <span class="mi">10</span><span class="p">;</span>
		<span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="p">}</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="sc">'L'</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="mi">50</span><span class="p">;</span>
	<span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'X'</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="mi">10</span><span class="p">;</span>
	    <span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">default</span><span class="o">:</span>
	<span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">pos</span> <span class="o">==</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 个位</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">])</span> <span class="p">{</span>
    <span class="k">case</span> <span class="sc">'I'</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
	<span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'X'</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="mi">8</span><span class="p">;</span>
	    <span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'V'</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="mi">3</span><span class="p">;</span>
	    <span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span> <span class="p">{</span>
	    <span class="k">while</span> <span class="p">(</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'I'</span><span class="p">)</span> <span class="p">{</span>
		<span class="o">++</span><span class="n">ans</span><span class="p">;</span>
		<span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	    <span class="p">}</span>
	<span class="p">}</span>

	<span class="k">break</span><span class="p">;</span>
    <span class="k">case</span> <span class="sc">'V'</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span>
	<span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="k">while</span> <span class="p">(</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">str</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'I'</span><span class="p">)</span> <span class="p">{</span>
	    <span class="o">++</span><span class="n">ans</span><span class="p">;</span>
	    <span class="o">++</span><span class="n">pos</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">break</span><span class="p">;</span>
    <span class="k">default</span><span class="o">:</span>
	<span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>
不得不说，这样的代码比较丑，这是真的，就算解出来了成就感也不强。<br></p>
</div>
</div>

<div id="outline-container-orgb1e591c" class="outline-3">
<h3 id="orgb1e591c">Approach 2</h3>
<div class="outline-text-3" id="text-orgb1e591c">
<p>
这个解法是leetcode上最快的解法之一，只使用一个循环就完成了计算，代码整体上很简洁，也比较好理解。只需要针对6种特殊情况做特殊处理就好。<br></p>

<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">romanToInt</span><span class="p">(</span><span class="n">string</span> <span class="n">s</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">switch</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
	<span class="k">case</span> <span class="sc">'M'</span><span class="o">:</span>
	    <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'C'</span><span class="p">)</span>
		<span class="n">result</span> <span class="o">+=</span> <span class="mi">800</span><span class="p">;</span>
	    <span class="k">else</span>
		<span class="n">result</span> <span class="o">+=</span> <span class="mi">1000</span><span class="p">;</span>
	    <span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="sc">'D'</span><span class="o">:</span>
	    <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'C'</span><span class="p">)</span>
		<span class="n">result</span> <span class="o">+=</span> <span class="mi">300</span><span class="p">;</span>
	    <span class="k">else</span>
		<span class="n">result</span> <span class="o">+=</span> <span class="mi">500</span><span class="p">;</span>
	    <span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="sc">'C'</span><span class="o">:</span>
	    <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'X'</span><span class="p">)</span>
		<span class="n">result</span> <span class="o">+=</span> <span class="mi">80</span><span class="p">;</span>
	    <span class="k">else</span>
		<span class="n">result</span> <span class="o">+=</span> <span class="mi">100</span><span class="p">;</span>
	    <span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="sc">'L'</span><span class="o">:</span>
	    <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'X'</span><span class="p">)</span>
		<span class="n">result</span> <span class="o">+=</span> <span class="mi">30</span><span class="p">;</span>
	    <span class="k">else</span>
		<span class="n">result</span> <span class="o">+=</span> <span class="mi">50</span><span class="p">;</span>
	    <span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="sc">'X'</span><span class="o">:</span>
	    <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'I'</span><span class="p">)</span>
		<span class="n">result</span> <span class="o">+=</span> <span class="mi">8</span><span class="p">;</span>
	    <span class="k">else</span>
		<span class="n">result</span> <span class="o">+=</span> <span class="mi">10</span><span class="p">;</span>
	    <span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="sc">'V'</span><span class="o">:</span>
	    <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="sc">'I'</span><span class="p">)</span>
		<span class="n">result</span> <span class="o">+=</span> <span class="mi">3</span><span class="p">;</span>
	    <span class="k">else</span>
		<span class="n">result</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span>
	    <span class="k">break</span><span class="p">;</span>

	<span class="k">case</span> <span class="sc">'I'</span><span class="o">:</span>
	    <span class="n">result</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
	    <span class="k">break</span><span class="p">;</span>

	<span class="k">default</span><span class="o">:</span><span class="p">;</span>
	<span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>

<div id="outline-container-org3b667e7" class="outline-3">
<h3 id="org3b667e7">Approach 3</h3>
<div class="outline-text-3" id="text-org3b667e7">
<p>
下面这个是我在看该问题的discuss板块的时候发现的。不得不说，结题思路实在新奇，这点是值得学习的。不过我比较担心它的时间复杂度。该方法使用Java编写。<br></p>
<div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">int</span> <span class="nf">romanToInt</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">sum</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
    <span class="k">if</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">"IV"</span><span class="o">)!=-</span><span class="mi">1</span><span class="o">){</span><span class="n">sum</span><span class="o">-=</span><span class="mi">2</span><span class="o">;}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">"IX"</span><span class="o">)!=-</span><span class="mi">1</span><span class="o">){</span><span class="n">sum</span><span class="o">-=</span><span class="mi">2</span><span class="o">;}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">"XL"</span><span class="o">)!=-</span><span class="mi">1</span><span class="o">){</span><span class="n">sum</span><span class="o">-=</span><span class="mi">20</span><span class="o">;}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">"XC"</span><span class="o">)!=-</span><span class="mi">1</span><span class="o">){</span><span class="n">sum</span><span class="o">-=</span><span class="mi">20</span><span class="o">;}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">"CD"</span><span class="o">)!=-</span><span class="mi">1</span><span class="o">){</span><span class="n">sum</span><span class="o">-=</span><span class="mi">200</span><span class="o">;}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="s">"CM"</span><span class="o">)!=-</span><span class="mi">1</span><span class="o">){</span><span class="n">sum</span><span class="o">-=</span><span class="mi">200</span><span class="o">;}</span>

    <span class="kt">char</span> <span class="n">c</span><span class="o">[]=</span><span class="n">s</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">count</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>

    <span class="k">for</span><span class="o">(;</span><span class="n">count</span><span class="o">&lt;=</span><span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">()-</span><span class="mi">1</span><span class="o">;</span><span class="n">count</span><span class="o">++){</span>
	<span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">[</span><span class="n">count</span><span class="o">]==</span><span class="sc">'M'</span><span class="o">)</span> <span class="n">sum</span><span class="o">+=</span><span class="mi">1000</span><span class="o">;</span>
	<span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">[</span><span class="n">count</span><span class="o">]==</span><span class="sc">'D'</span><span class="o">)</span> <span class="n">sum</span><span class="o">+=</span><span class="mi">500</span><span class="o">;</span>
	<span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">[</span><span class="n">count</span><span class="o">]==</span><span class="sc">'C'</span><span class="o">)</span> <span class="n">sum</span><span class="o">+=</span><span class="mi">100</span><span class="o">;</span>
	<span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">[</span><span class="n">count</span><span class="o">]==</span><span class="sc">'L'</span><span class="o">)</span> <span class="n">sum</span><span class="o">+=</span><span class="mi">50</span><span class="o">;</span>
	<span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">[</span><span class="n">count</span><span class="o">]==</span><span class="sc">'X'</span><span class="o">)</span> <span class="n">sum</span><span class="o">+=</span><span class="mi">10</span><span class="o">;</span>
	<span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">[</span><span class="n">count</span><span class="o">]==</span><span class="sc">'V'</span><span class="o">)</span> <span class="n">sum</span><span class="o">+=</span><span class="mi">5</span><span class="o">;</span>
	<span class="k">if</span><span class="o">(</span><span class="n">c</span><span class="o">[</span><span class="n">count</span><span class="o">]==</span><span class="sc">'I'</span><span class="o">)</span> <span class="n">sum</span><span class="o">+=</span><span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">sum</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
    </div>

  </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="/posts/algorithm-weekly-integer-to-roman/" class="u-url">每周算法：阿拉伯数字转换罗马数字</a></h1>
      <div class="metadata">
        

        
  <div class="date blur-1">
    <time class="published dt-published" datetime="2018-09-05T09:15:43+08:00" itemprop="datePublished" title="2018-09-05 09:15">Sep 05 2018  (09:15)
    </time>
</div>

        
    <div class="comment blur-1">
      
        
    <a href="/posts/algorithm-weekly-integer-to-roman/#disqus_thread" data-disqus-identifier="cache/posts/algorithm-weekly-integer-to-roman.html">Comments</a>


    </div>

        
    <div class="tags blur-2">
    <ul itemprop="keywords">
<li><a class="tag p-category" href="/tags/algorithm/" rel="tag">algorithm</a></li>
        <li><a class="tag p-category" href="/tags/leetcode/" rel="tag">leetcode</a></li>
    </ul>
</div>

      </div>
    </header><div class="p-summary entry-summary">
      <div id="outline-container-org3231d70" class="outline-2">
<h2 id="org3231d70">Description</h2>
<div class="outline-text-2" id="text-org3231d70">
<p>
Roman numerals are represented by seven different symbols: <code>I</code> , <code>V</code> , <code>X</code> , <code>L</code> , <code>C</code> , <code>D</code> and <code>M</code>.<br></p>
<pre class="example">
Symbol       Value
I             1
V             5
X             10
L             50
C             100
D             500
M             1000
</pre>

<p>
For example, two is written as <code>II</code> in Roman numeral, just two one's added together. Twelve is written as, <code>XII</code> , which is simply <code>X</code> + <code>II</code> . The number twenty seven is written as <code>XXVII</code> , which is <code>XX</code> + <code>V</code> + <code>II</code> .<br></p>

<p>
Roman numerals are usually written largest to smallest from left to right. However, the numeral for four is not <code>IIII</code> . Instead, the number four is written as <code>IV</code> . Because the one is before the five we subtract it making four. The same principle applies to the number nine, which is written as <code>IX</code>. There are six instances where subtraction is used:<br></p>

<ul class="org-ul">
<li>
<code>I</code> can be placed before <code>V</code> (5) and <code>X</code> (10) to make 4 and 9.<br>
</li>
<li>
<code>X</code> can be placed before <code>L</code> (50) and <code>C</code> (100) to make 40 and 90.<br>
</li>
<li>
<code>C</code> can be placed before <code>D</code> (500) and <code>M</code> (1000) to make 400 and 900.<br>
</li>
</ul>
<p>
Given an integer, convert it to a roman numeral. Input is guaranteed to be within the range from 1 to 3999.<br></p>

<p>
<b>Example 1:</b><br></p>
<pre class="example">
Input: 3
Output: "III"
</pre>

<p>
<b>Example 2:</b><br></p>
<pre class="example">
Input: 4
Output: "IV"
</pre>

<p>
<b>Example 3:</b><br></p>
<pre class="example">
Input: 9
Output: "IX"
</pre>

<p>
<b>Example 4:</b><br></p>
<pre class="example">
Input: 58
Output: "LVIII"
Explanation: C = 100, L = 50, XXX = 30 and III = 3.
</pre>

<p>
<b>Example 5:</b><br></p>
<pre class="example">
Input: 1994
Output: "MCMXCIV"
Explanation: M = 1000, CM = 900, XC = 90 and IV = 4.
</pre>

<p>
来源：<a href="https://leetcode.com/problems/integer-to-roman/description/">leetcode 12 integer to roman</a><br></p>
</div>
</div>

<div id="outline-container-org0a5431d" class="outline-2">
<h2 id="org0a5431d">Solution</h2>
<div class="outline-text-2" id="text-org0a5431d">
</div>
<div id="outline-container-orgdd374ce" class="outline-3">
<h3 id="orgdd374ce">Approach 1</h3>
<div class="outline-text-3" id="text-orgdd374ce">
<p>
这道题并不难，方法也很容易想到，这道题被归为 <code>medium</code> 难度反而让我感到有些奇怪，下面的代码就是我的解法。<br></p>
<div class="highlight"><pre><span></span><span class="n">string</span> <span class="nf">intToRoman</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// digit1 ~ 4 分别代表个十百千</span>
    <span class="kt">int</span> <span class="n">digit1</span> <span class="o">=</span> <span class="n">num</span><span class="o">%</span><span class="mi">10</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">digit2</span> <span class="o">=</span> <span class="n">num</span><span class="o">/</span><span class="mi">10</span><span class="o">%</span><span class="mi">10</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">digit3</span> <span class="o">=</span> <span class="n">num</span><span class="o">/</span><span class="mi">100</span><span class="o">%</span><span class="mi">10</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">digit4</span> <span class="o">=</span> <span class="n">num</span><span class="o">/</span><span class="mi">1000</span><span class="o">%</span><span class="mi">10</span><span class="p">;</span>

    <span class="n">string</span> <span class="n">ans</span><span class="p">;</span>

    <span class="c1">// 千</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">digit4</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="sc">'M'</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 百</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">digit3</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">digit3</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="sc">'C'</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="s">"CD"</span><span class="p">;</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="mi">5</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">6</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">7</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">8</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="sc">'D'</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">digit3</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="sc">'C'</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="mi">9</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="s">"CM"</span><span class="p">;</span>
	<span class="k">break</span><span class="p">;</span>
    <span class="k">default</span><span class="o">:</span>
	<span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 十</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">digit2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">digit2</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">){</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="sc">'X'</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="s">"XL"</span><span class="p">;</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="mi">5</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">6</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">7</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">8</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="sc">'L'</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">digit2</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="s">"X"</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="mi">9</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="s">"XC"</span><span class="p">;</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">default</span><span class="o">:</span>
	<span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 个</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">digit1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">digit1</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="sc">'I'</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="s">"IV"</span><span class="p">;</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="mi">5</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">6</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">7</span><span class="o">:</span>
    <span class="k">case</span> <span class="mi">8</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="sc">'V'</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">digit1</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">ans</span> <span class="o">+=</span> <span class="sc">'I'</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="mi">9</span><span class="o">:</span>
	<span class="n">ans</span> <span class="o">+=</span> <span class="s">"IX"</span><span class="p">;</span>
	<span class="k">break</span><span class="p">;</span>

    <span class="k">default</span><span class="o">:</span>
	<span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>
这样做感觉有点简单粗暴，而且代码看起来不够优雅。<br></p>
</div>
</div>

<div id="outline-container-orgc470038" class="outline-3">
<h3 id="orgc470038">Approach 2</h3>
<div class="outline-text-3" id="text-orgc470038">
<p>
下面代码是从leetcode上找的，这样的打表法，看起来至少从形式上会更加美观，而且也非常好理解。<br></p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">const</span> <span class="k">static</span> <span class="n">string</span> <span class="n">THOUS</span><span class="p">[];</span>
    <span class="k">const</span> <span class="k">static</span> <span class="n">string</span> <span class="n">HUNDS</span><span class="p">[];</span>
    <span class="k">const</span> <span class="k">static</span> <span class="n">string</span> <span class="n">TENS</span><span class="p">[];</span>
    <span class="k">const</span> <span class="k">static</span> <span class="n">string</span> <span class="n">ONES</span><span class="p">[];</span>
    <span class="n">string</span> <span class="nf">intToRoman</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">string</span> <span class="n">result</span><span class="p">;</span>
	<span class="n">result</span> <span class="o">+=</span> <span class="n">THOUS</span><span class="p">[(</span><span class="kt">int</span><span class="p">)(</span><span class="n">num</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span><span class="o">%</span><span class="mi">10</span><span class="p">];</span>
	<span class="n">result</span> <span class="o">+=</span> <span class="n">HUNDS</span><span class="p">[(</span><span class="kt">int</span><span class="p">)(</span><span class="n">num</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">%</span><span class="mi">10</span><span class="p">];</span>
	<span class="n">result</span> <span class="o">+=</span> <span class="n">TENS</span><span class="p">[(</span><span class="kt">int</span><span class="p">)(</span><span class="n">num</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span><span class="o">%</span><span class="mi">10</span><span class="p">];</span>
	<span class="n">result</span> <span class="o">+=</span> <span class="n">ONES</span><span class="p">[</span><span class="n">num</span><span class="o">%</span><span class="mi">10</span><span class="p">];</span>
	<span class="k">return</span> <span class="n">result</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">const</span> <span class="n">string</span> <span class="n">Solution</span><span class="o">::</span><span class="n">THOUS</span><span class="p">[]</span>	<span class="o">=</span> <span class="p">{</span><span class="s">""</span><span class="p">,</span><span class="s">"M"</span><span class="p">,</span><span class="s">"MM"</span><span class="p">,</span><span class="s">"MMM"</span><span class="p">};</span>
<span class="k">const</span> <span class="n">string</span> <span class="n">Solution</span><span class="o">::</span><span class="n">HUNDS</span><span class="p">[]</span>	<span class="o">=</span> <span class="p">{</span><span class="s">""</span><span class="p">,</span><span class="s">"C"</span><span class="p">,</span><span class="s">"CC"</span><span class="p">,</span><span class="s">"CCC"</span><span class="p">,</span><span class="s">"CD"</span><span class="p">,</span><span class="s">"D"</span><span class="p">,</span><span class="s">"DC"</span><span class="p">,</span><span class="s">"DCC"</span><span class="p">,</span><span class="s">"DCCC"</span><span class="p">,</span><span class="s">"CM"</span><span class="p">};</span>
<span class="k">const</span> <span class="n">string</span> <span class="n">Solution</span><span class="o">::</span><span class="n">TENS</span><span class="p">[]</span>	<span class="o">=</span> <span class="p">{</span><span class="s">""</span><span class="p">,</span><span class="s">"X"</span><span class="p">,</span><span class="s">"XX"</span><span class="p">,</span><span class="s">"XXX"</span><span class="p">,</span><span class="s">"XL"</span><span class="p">,</span><span class="s">"L"</span><span class="p">,</span><span class="s">"LX"</span><span class="p">,</span><span class="s">"LXX"</span><span class="p">,</span><span class="s">"LXXX"</span><span class="p">,</span><span class="s">"XC"</span><span class="p">};</span>
<span class="k">const</span> <span class="n">string</span> <span class="n">Solution</span><span class="o">::</span><span class="n">ONES</span><span class="p">[]</span>	<span class="o">=</span> <span class="p">{</span><span class="s">""</span><span class="p">,</span><span class="s">"I"</span><span class="p">,</span><span class="s">"II"</span><span class="p">,</span><span class="s">"III"</span><span class="p">,</span><span class="s">"IV"</span><span class="p">,</span><span class="s">"V"</span><span class="p">,</span><span class="s">"VI"</span><span class="p">,</span><span class="s">"VII"</span><span class="p">,</span><span class="s">"VIII"</span><span class="p">,</span><span class="s">"IX"</span><span class="p">};</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgb1acbbc" class="outline-3">
<h3 id="orgb1acbbc">Approach 3</h3>
<div class="outline-text-3" id="text-orgb1acbbc">
<p>
下面这段代码也是leetcode上的答案，这个答案的通用性要好一些，最起码找到了规律，这有助于算法的后续拓展。<br></p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">string</span> <span class="n">intToRoman</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">base</span><span class="p">{</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>
	<span class="n">string</span> <span class="n">roman</span> <span class="o">=</span> <span class="s">"MDCLXVI"</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="p">;</span>
	<span class="n">string</span> <span class="n">ret</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
	<span class="k">while</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="p">{</span>
	    <span class="n">r</span> <span class="o">=</span> <span class="n">num</span><span class="o">/</span><span class="n">base</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
	    <span class="n">num</span> <span class="o">=</span> <span class="n">num</span> <span class="o">-</span> <span class="n">r</span><span class="o">*</span><span class="n">base</span><span class="p">[</span><span class="n">index</span><span class="p">];</span>
	    <span class="k">if</span><span class="p">(</span><span class="n">r</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">ret</span> <span class="o">+=</span> <span class="n">roman</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">index</span><span class="p">];</span>
		<span class="n">ret</span> <span class="o">+=</span> <span class="n">roman</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">];</span>
	    <span class="p">}</span>
	    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">r</span> <span class="o">==</span> <span class="mi">9</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">ret</span> <span class="o">+=</span> <span class="n">roman</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">index</span><span class="p">];</span>
		<span class="n">ret</span> <span class="o">+=</span> <span class="n">roman</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">index</span> <span class="o">-</span><span class="mi">2</span><span class="p">];</span>
	    <span class="p">}</span>
	    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">r</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">ret</span> <span class="o">+=</span> <span class="n">roman</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
		<span class="c1">// 下面这个string的用法值得学习</span>
		<span class="n">string</span> <span class="nf">tmp</span><span class="p">(</span><span class="n">r</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">roman</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">index</span><span class="p">]);</span>
		<span class="n">ret</span> <span class="o">+=</span> <span class="n">tmp</span><span class="p">;</span>
	    <span class="p">}</span>
	    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">r</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">string</span> <span class="n">tmp</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">roman</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">index</span><span class="p">]);</span>
		<span class="n">ret</span> <span class="o">+=</span> <span class="n">tmp</span><span class="p">;</span>
	    <span class="p">}</span>
	    <span class="n">index</span><span class="o">++</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
<p>
此外，我还学到了 <code>string tmp(num, ch)</code> 这样的创建具有重复字符的字符串的方法。<br></p>
</div>
</div>
</div>
    </div>

  </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="/posts/static-member-initialization-and-private-member-function/" class="u-url">静态成员变量初始化相关问题</a></h1>
      <div class="metadata">
        

        
  <div class="date blur-1">
    <time class="published dt-published" datetime="2018-09-04T23:37:37+08:00" itemprop="datePublished" title="2018-09-04 23:37">Sep 04 2018  (23:37)
    </time>
</div>

        
    <div class="comment blur-1">
      
        
    <a href="/posts/static-member-initialization-and-private-member-function/#disqus_thread" data-disqus-identifier="cache/posts/static-member-initialization-and-private-member-function.html">Comments</a>


    </div>

        
    <div class="tags blur-2">
    <ul itemprop="keywords">
<li><a class="tag p-category" href="/tags/cpp/" rel="tag">cpp</a></li>
        <li><a class="tag p-category" href="/tags/syntax/" rel="tag">syntax</a></li>
    </ul>
</div>

      </div>
    </header><div class="p-summary entry-summary">
      <div id="outline-container-orgdaf55a4" class="outline-2">
<h2 id="orgdaf55a4">引言</h2>
<div class="outline-text-2" id="text-orgdaf55a4">
<p>
这篇文章的起因是出于对于 <code>C++</code> 饿汉单例模式代码的一些疑问，查阅了一些资料。在仔细研究后，我发现在一些基础概念的理解还是存在偏差。<br>
下面请看这样的一段代码，能看出其中有那些不太“正常”的语句么。<br></p>

<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Singleton</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">static</span> <span class="n">Singleton</span><span class="o">*</span> <span class="n">getInstance</span><span class="p">();</span>
<span class="k">private</span><span class="o">:</span>
    <span class="n">Singleton</span><span class="p">()</span> <span class="p">{}</span>
    <span class="k">static</span> <span class="n">Singleton</span><span class="o">*</span> <span class="n">instance</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">Singleton</span><span class="o">*</span> <span class="n">Singleton</span><span class="o">::</span><span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="p">();</span>
<span class="n">Singleton</span><span class="o">*</span> <span class="n">Singleton</span><span class="o">::</span><span class="n">getInstance</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">instance</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>

<div id="outline-container-orgc2b204c" class="outline-2">
<h2 id="orgc2b204c">私有静态成员的初始化</h2>
<div class="outline-text-2" id="text-orgc2b204c">
<p>
上面的代码是饿汉单例模式的 <code>C++</code> 的实现，在没有查阅资料之前，我对其中私有静态成员变量的初始化存疑。主要有以下两点：<br></p>
<ul class="org-ul">
<li>为什么私有变量能够在类外被修改<br>
</li>
<li>为什么私有构造函数能够在类外被调用<br>
</li>
</ul>
<p>
在我之前的知识积累中， <b>私有的成员变量或成员函数是不能够在类外被访问的</b> 。那么为什么以上代码没有问题呢？<br></p>

<p>
在C++标准中找到了下面的一段话(可以在 <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3690.pdf">C++11 standard</a> 的 9.4.2节 或  <a href="http://eel.is/c++draft/class.static.data#2">C++ standard working draft</a> 的 10.3.9.2节 中找到)<br></p>
<blockquote>
<p>
The initializer expression in the definition of a static data member is in the scope of its class.<br></p>
</blockquote>
<p>
这句话的意思是：静态成员变量的初始化是被看做为它自身的类域中的（ <del>翻译的可能不是很准</del> ）。这样就不难理解为什么私有的静态成员变量能够在其类外被初始化了，由其私有构造函数进行构造也能说的通了。<br></p>


<p>
<b>同样</b> ,在C++标准中给出了下面这样的示例代码：<br></p>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">process</span> <span class="p">{</span>
  <span class="k">static</span> <span class="n">process</span><span class="o">*</span> <span class="n">run_chain</span><span class="p">;</span>
  <span class="k">static</span> <span class="n">process</span><span class="o">*</span> <span class="n">running</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">process</span><span class="o">*</span> <span class="n">process</span><span class="o">::</span><span class="n">running</span> <span class="o">=</span> <span class="n">get_main</span><span class="p">();</span>
<span class="n">process</span><span class="o">*</span> <span class="n">process</span><span class="o">::</span><span class="n">run_chain</span> <span class="o">=</span> <span class="n">running</span><span class="p">;</span>
</pre></div>

<p>
给出的说明如下：<br></p>
<blockquote>
<p>
The static data member <code>run_chain</code> of class process is defined in global scope; the notation <code>process​::​run_chain</code> specifies that the member <code>run_chain</code> is a member of class <code>process</code> and in the scope of class <code>process</code>. In the static data member definition, the initializer expression refers to the static data member running of class <code>process</code>.<br></p>
</blockquote>
<p>
静态成员 <code>run_chain</code> 定义在全局域；而 <code>process::run_chain</code> 则表示 <code>run_chain</code> 是 <code>process</code> 类的成员变量，从而处在 <code>process</code> 类的作用域中。<br></p>
</div>
</div>

<div id="outline-container-org19acb56" class="outline-2">
<h2 id="org19acb56">私有构造函数</h2>
<div class="outline-text-2" id="text-org19acb56">
<p>
在查阅资料时，我发现 Peter 的 <a href="https://stackoverflow.com/a/41361967">描述</a> 纠正了我对私有构造函数的一些看法。<br></p>
<blockquote>
<p>
The point of a <code>private</code> constructor is not preventing object construction. It is about controlling which code can access the constructor, and therefore limiting which code to create an object that is an instance of that class. A <code>private</code> constructor is accessible to all member functions ( <code>static</code> or otherwise) of the class, and to all declared <code>friend</code> s of the class (which may be individual functions, or other classes) - so any of those can create an instance of the class using a <code>private</code> constructor (assuming the constructor is defined).<br></p>
</blockquote>
<p>
私有构造函数的目的并不是禁止对象构造，其目的在于控制哪些代码能够调用这个构造函数，进而限制类对象的创建。私有的构造函数可以被该类的所有成员函数（静态或非静态的）调用，该类的友元类或友元方法也能访问该类的私有函数，所以在上述情况中都可以通过私有的构造函数实例化出类对象。<br></p>
</div>
</div>

<div id="outline-container-orgde6004d" class="outline-2">
<h2 id="orgde6004d">参考资料</h2>
<div class="outline-text-2" id="text-orgde6004d">
<ul class="org-ul">
<li>
<a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3690.pdf">ISO C++11 standard</a><br>
</li>
<li>
<a href="http://eel.is/c++draft/class.static.data#2">ISO C++ standard working draft</a><br>
</li>
<li>
<a href="https://stackoverflow.com/questions/38583989/access-to-private-static-function-during-static-member-initialization">stackoverflow.com - access to private static function…</a><br>
</li>
<li>
<a href="https://stackoverflow.com/questions/41361223/why-private-constructor-prevents-object-creation-c">stackoverflow.com - private constructor</a><br>
</li>
<li>
<a href="https://stackoverflow.com/questions/7857989/static-member-variable-when-declared-private">stackoverflow.com - static member variable when declared private</a><br>
</li>
<li>
<a href="https://en.cppreference.com/w/cpp/language/static#Static_data_members">cppreference.com - static data members</a><br>
</li>
</ul>
</div>
</div>
    </div>

  </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="/posts/non-blocking-socket-connect-tips/" class="u-url">客户端使用非阻塞socket进行connect的流程</a></h1>
      <div class="metadata">
        

        
  <div class="date blur-1">
    <time class="published dt-published" datetime="2018-08-31T17:04:19+08:00" itemprop="datePublished" title="2018-08-31 17:04">Aug 31 2018  (17:04)
    </time>
</div>

        
    <div class="comment blur-1">
      
        
    <a href="/posts/non-blocking-socket-connect-tips/#disqus_thread" data-disqus-identifier="cache/posts/non-blocking-socket-connect-tips.html">Comments</a>


    </div>

        
    <div class="tags blur-2">
    <ul itemprop="keywords">
<li><a class="tag p-category" href="/tags/network/" rel="tag">network</a></li>
        <li><a class="tag p-category" href="/tags/nio/" rel="tag">nio</a></li>
        <li><a class="tag p-category" href="/tags/non-blocking/" rel="tag">non-blocking</a></li>
        <li><a class="tag p-category" href="/tags/socket/" rel="tag">socket</a></li>
    </ul>
</div>

      </div>
    </header><div class="p-summary entry-summary">
      <div id="outline-container-org7626edb" class="outline-2">
<h2 id="org7626edb">问题</h2>
<div class="outline-text-2" id="text-org7626edb">
<p>
使用非阻塞（ <code>non-blocking</code> ） socket尝试与服务端建立连接（ <code>connect</code> ）时，由于是io非阻塞的，所以 <code>connect</code> 函数会立即返回，那么如何判断client与server连接成功了呢？<br></p>
</div>
</div>

<div id="outline-container-org65c1dbb" class="outline-2">
<h2 id="org65c1dbb">解答</h2>
<div class="outline-text-2" id="text-org65c1dbb">
<p>
客户端建立连接的示例代码如下：<br></p>
<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="n">connect</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="p">...);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">res</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">errno</span> <span class="o">!=</span> <span class="n">EINPROGRESS</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// case1. error, fail somehow, close socket</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="n">res</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// case2. connection has succeeded immediately</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// case3. connection attempt is in progress</span>
<span class="p">}</span>
</pre></div>
<p>
由于是非阻塞模式，所以 <code>connect</code> 之后会直接返回，根据返回值 <code>res</code> 和 <code>errno</code> 能够判断建立连接的结果。<br></p>
<ul class="org-ul">
<li>case1，表示连接失败；<br>
</li>
<li>case2，表示连接建立成功；<br>
</li>
<li>case3，表示正在建立连接的过程中，在这个情况下，需要等待socket变成可写（writable）状态，可以使用 <code>select</code> 或 <code>epoll</code> 完成；<br>
</li>
</ul>
<p>
在 case3 情况下，socket可写后，执行下面的代码检查socket是否出现错误。<br></p>
<ul class="org-ul">
<li>case4和case5，表示socket出现了错误，将会关闭连接；<br>
</li>
<li>case6，表示连接建立成功，可以开始 <code>read</code> 和 <code>write</code> 了。<br>
</li>
</ul>
<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">socklen_t</span> <span class="n">result_len</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">getsockopt</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">SO_ERROR</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">result</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">result_len</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// case4. error, fail somehow, close socket</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// case5. connection failed; error code is in 'result'</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// case6. socket is ready for read()/write()</span>
</pre></div>
</div>
</div>

<div id="outline-container-org7ef53f1" class="outline-2">
<h2 id="org7ef53f1">参考资料</h2>
<div class="outline-text-2" id="text-org7ef53f1">
<ul class="org-ul">
<li>
<a href="https://stackoverflow.com/questions/10187347/async-connect-and-disconnect-with-epoll-linux/10194883#10194883">stackoverflow.com</a><br>
</li>
</ul>
</div>
</div>
    </div>

  </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="/posts/algorithm-weekly-container-with-most-water/" class="u-url">每周算法：最大容器</a></h1>
      <div class="metadata">
        

        
  <div class="date blur-1">
    <time class="published dt-published" datetime="2018-08-29T11:36:33+08:00" itemprop="datePublished" title="2018-08-29 11:36">Aug 29 2018  (11:36)
    </time>
</div>

        
    <div class="comment blur-1">
      
        
    <a href="/posts/algorithm-weekly-container-with-most-water/#disqus_thread" data-disqus-identifier="cache/posts/algorithm-weekly-container-with-most-water.html">Comments</a>


    </div>

        
    <div class="tags blur-2">
    <ul itemprop="keywords">
<li><a class="tag p-category" href="/tags/algorithm/" rel="tag">algorithm</a></li>
        <li><a class="tag p-category" href="/tags/leetcode/" rel="tag">leetcode</a></li>
    </ul>
</div>

      </div>
    </header><div class="p-summary entry-summary">
      <div id="outline-container-org88b6a7a" class="outline-2">
<h2 id="org88b6a7a">Description</h2>
<div class="outline-text-2" id="text-org88b6a7a">
<p>
Given n non-negative integers a1, a2, …, an , where each represents a point at coordinate (i, ai). n vertical lines are drawn such that the two endpoints of line i is at (i, ai) and (i, 0). Find two lines, which together with x-axis forms a container, such that the container contains the most water.<br></p>

<p>
<b>Note:</b> You may not slant the container and n is at least 2.<br></p>

<p>
<b>Example:</b><br>
Input: [1,8,6,2,5,4,8,3,7]<br>
Output: 49<br></p>

<p>
来源： <a href="https://leetcode.com/problems/container-with-most-water/description/">leetcode 11 Container with most water</a><br></p>
</div>
</div>

<div id="outline-container-orga49a056" class="outline-2">
<h2 id="orga49a056">Solution</h2>
<div class="outline-text-2" id="text-orga49a056">
</div>
<div id="outline-container-org44585f1" class="outline-3">
<h3 id="org44585f1">Approach 1 暴力解法</h3>
<div class="outline-text-3" id="text-org44585f1">
<p>
暴力解法是最容易想到的解法了，然而暴力解法肯定不是本题的意图。<br></p>

<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">maxArea</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">height</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="n">height</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
	    <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">min</span><span class="p">(</span><span class="n">height</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">height</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
	    <span class="n">ans</span> <span class="o">=</span> <span class="n">ans</span> <span class="o">&gt;</span> <span class="n">size</span> <span class="o">?</span> <span class="nl">ans</span> <span class="p">:</span> <span class="n">size</span><span class="p">;</span>
	<span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>
使用这种解法只要把变量变化的范围想清楚就行了，没有什么特别的难点。<br>
暴力解法的时间复杂度为 O(n<sup>2</sup>)，空间复杂度为 O(1)。<br></p>
</div>
</div>

<div id="outline-container-org0b94c32" class="outline-3">
<h3 id="org0b94c32">Approach 2</h3>
<div class="outline-text-3" id="text-org0b94c32">
<p>
我在leetcode上看到这样一种解法，这种解法从逻辑和形式上看上不复杂，但是我的疑问在是否有严密的数学推导和论证。<br></p>

<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">maxArea</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">height</span><span class="p">)</span> <span class="p">{</span>

    <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">left</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">right</span> <span class="o">=</span> <span class="n">height</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="n">left</span> <span class="o">&lt;</span> <span class="n">right</span><span class="p">)</span> <span class="p">{</span>
	<span class="kt">int</span> <span class="n">w</span> <span class="o">=</span> <span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">h</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">height</span><span class="p">[</span><span class="n">left</span><span class="p">],</span> <span class="n">height</span><span class="p">[</span><span class="n">right</span><span class="p">]);</span>

	<span class="n">ans</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">w</span><span class="o">*</span><span class="n">h</span><span class="p">,</span> <span class="n">ans</span><span class="p">);</span>

	<span class="k">if</span> <span class="p">(</span><span class="n">height</span><span class="p">[</span><span class="n">left</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">[</span><span class="n">right</span><span class="p">])</span> <span class="p">{</span>
	    <span class="o">++</span><span class="n">left</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="k">else</span> <span class="p">{</span>
	    <span class="o">--</span><span class="n">right</span><span class="p">;</span>
	<span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>
这个算法的主要思想是最大面积由两端边界较短的板决定；所以在移动边界时要将长板保留，移动短板。该算法的时间复杂度为 O(n)，空间复杂度为O（1）。<br></p>

<p>
在寻求该算法的数学推导时，我看到了 @nan15 给出的另外一种解释：<br></p>
<blockquote>
<p>
We starts with the widest container, <code>l = 0</code> and <code>r = n - 1</code> . Let's say the left one is shorter: <code>h[l] &lt; h[r]</code> . Then, this is already the largest container the left one can possibly form. There's no need to consider it again. Therefore, we just throw it away and start again with <code>l = 1</code> and <code>r = n - 1</code> .<br></p>
</blockquote>
<p>
这个论证我认为是更加直观的：从最宽的容器开始，这时左边坐标 <code>l = 0</code> ，右边坐标 <code>r = n - 1</code> 。假设左边更短，也就是 <code>h[l] &lt; h[r]</code> 。那么，对于左边的板子，这是已经是它能够形成的最大的面积了，也就不需要再考虑它了。因此，将左边的板子丢掉，使用 <code>l = 1</code> 和 <code>r = n - 1</code> 重新开始。<br></p>
</div>
</div>
</div>

<div id="outline-container-orgba89913" class="outline-2">
<h2 id="orgba89913">Reference</h2>
<div class="outline-text-2" id="text-orgba89913">
<ul class="org-ul">
<li>
<a href="https://leetcode.com/problems/container-with-most-water/solution/">leetcode problem solution</a><br>
</li>
<li>
<a href="https://leetcode.com/problems/container-with-most-water/discuss/6089/anyone-who-has-a-on-algorithm">leetcode discuss algorithm proof 1</a><br>
</li>
<li>
<a href="https://leetcode.com/problems/container-with-most-water/discuss/6099/yet-another-way-to-see-what-happens-in-the-on-algorithm">leetcode discuss algorithm proof 2</a><br>
</li>
</ul>
</div>
</div>
    </div>

  </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="/posts/why-front-end-libraries/" class="u-url">为什么要使用各种前端框架</a></h1>
      <div class="metadata">
        

        
  <div class="date blur-1">
    <time class="published dt-published" datetime="2018-08-27T22:10:35+08:00" itemprop="datePublished" title="2018-08-27 22:10">Aug 27 2018  (22:10)
    </time>
</div>

        
    <div class="comment blur-1">
      
        
    <a href="/posts/why-front-end-libraries/#disqus_thread" data-disqus-identifier="cache/posts/why-front-end-libraries.html">Comments</a>


    </div>

        
    <div class="tags blur-2">
    <ul itemprop="keywords">
<li><a class="tag p-category" href="/tags/css/" rel="tag">css</a></li>
        <li><a class="tag p-category" href="/tags/front-end/" rel="tag">front-end</a></li>
        <li><a class="tag p-category" href="/tags/html/" rel="tag">html</a></li>
        <li><a class="tag p-category" href="/tags/javascript/" rel="tag">javascript</a></li>
    </ul>
</div>

      </div>
    </header><div class="p-summary entry-summary">
      <div id="outline-container-org9dd709b" class="outline-2">
<h2 id="org9dd709b">引言</h2>
<div class="outline-text-2" id="text-org9dd709b">
<p>
在学习前端的过程中，我开始接触到许多开发框架或开发工具，这些工具让我开始眼花缭乱。使用常规的html/css/js就已经能够开发出这种网页了，所以我问自己，为什么要学习这些框架或工具，这些库是用来解决什么问题的。想明白这个问题，我学习的目的就更加明确，在遇到一些开发情景时，也能够快速准确地挑选出应该使用的框架。<br></p>

<p>
下面按照我目前的理解，对目前的主流的前端开发库进行一些分析和比较。由于我还是一个初学着，所以我的观点可能还不是很成熟。<br></p>
</div>
</div>

<div id="outline-container-org2333ed2" class="outline-2">
<h2 id="org2333ed2">为什么要使用jQuery</h2>
<div class="outline-text-2" id="text-org2333ed2">
<p>
jQuery是一个轻量级js库，它有如下特性：<br></p>
<ul class="org-ul">
<li>简化了HTML/DOM操作<br>
</li>
<li>CSS选择器<br>
</li>
<li>动画特效支持<br>
</li>
<li>解决跨浏览器的兼容行问题<br>
</li>
<li>完善的Ajax支持<br>
</li>
</ul>
<p>
在查阅资料的过程中，我还听到一些主张停用jQuery的声音。原因就在于随着前端开发生态不断的完善，现代浏览器原生API已经足够好用。<br></p>
</div>
</div>

<div id="outline-container-orgbdb48eb" class="outline-2">
<h2 id="orgbdb48eb">为什么要使用SASS</h2>
<div class="outline-text-2" id="text-orgbdb48eb">
<p>
SASS是一种CSS预编译格式，它最终会编译成CSS。<br>
SASS提供了CSS语法的拓展，它支持变量，算数运算符，循环操作，函数操作，样式模板（mixin）等强大的特性。它能够让开发人员更方便地编写CSS。SASS支持 <code>import</code> 关键字，这样就能够很方便地对样式进行模块化设计。<br></p>

<p>
加一句题外话，在使用SASS时，需要考虑的另一个问题就是代码物理结构的安排（直白的说就是目录的划分，源文件的存放位置等），这也是所有代码开发中需要注意的问题。<br></p>

<p>
与SASS相似的工具还有LESS。<br></p>
</div>
</div>

<div id="outline-container-orgf3f51a8" class="outline-2">
<h2 id="orgf3f51a8">为什么要使用Bootstrap</h2>
<div class="outline-text-2" id="text-orgf3f51a8">
<p>
Bootstrap是一个用于快速开发网页的前端框架。以我目前的理解来看，它更像是一个网页样式框架。<br></p>
<ul class="org-ul">
<li>丰富的基础样式和资源<br>
</li>
<li>响应式（responsive），良好的移动端支持<br>
</li>
<li>强大的网格（grid）系统<br>
</li>
<li>一致性，保证跨浏览器的样式一致<br>
</li>
</ul>
</div>
</div>

<div id="outline-container-org266f6ef" class="outline-2">
<h2 id="org266f6ef">为什么要使用React</h2>
<div class="outline-text-2" id="text-org266f6ef">
<p>
DOM操作对性能的影响很大，频繁的DOM操作会使网页渲染的速度变慢，React主要解决了这个问题。<br>
React.js允许在js中编写html，形成Virtual DOM，只在变化进行重新渲染。<br></p>

<p>
下面的一段文字摘自参考资料中的第5篇文章。<br></p>
<blockquote>
<ul class="org-ul">
<li>Am I building an app which has lots of DOM interactions, or is it a relatively simple app with relatively few interactions?<br>
</li>
</ul>
<ul class="org-ul">
<li>Does my app require a very high browser performance, that any user interactions must immediately be reflected in the UI? Is my data going to change over time, at a high rate?<br>
</li>
<li>Is one user interaction going to affect many other areas/components in the UI?<br>
</li>
<li>Is there a possibility that my app could grow big in the future, and so I would want to write extremely neat, modular front-end JavaScript that is easy to maintain? Would I want to use lots of native JavaScript or would I prefer using a lot of abstractions/methods provided in a framework?<br>
</li>
<li>Would I prefer a framework/library which does not have a high learning curve and which is pretty easy to get started with development?<br>
</li>
</ul>
</blockquote>

<p>
在使用React之前，问自己这样几个问题，就能够帮助你决定是否需要使用React。<br></p>
<ul class="org-ul">
<li>所开发的网页应用涉及到很多DOM操作么？<br>
</li>
<li>开发的网页应用需要很高的性能么，这意味着任何用于的操作都要立刻反应在界面上？我的数据变更会很频繁么？<br>
</li>
<li>我开发的应用会在未来逐渐变得复杂么，这样我就需要将前端的js代码模块化？我是否会使用许多原生js特性，是否虚幻使用框架提供的抽象方法<br>
</li>
<li>是否需要一个学习曲线比较平缓的框架，能够方便地上手进行开发？<br>
</li>
</ul>
</div>
</div>


<div id="outline-container-orgf6bd083" class="outline-2">
<h2 id="orgf6bd083">参考资料</h2>
<div class="outline-text-2" id="text-orgf6bd083">
<ol class="org-ol">
<li>
<a href="https://www.w3schools.com/jquery/jquery_intro.asp">w3schools jQuery intro</a><br>
</li>
<li>
<a href="https://github.com/nefe/You-Dont-Need-jQuery">github you don't need jQuery</a><br>
</li>
<li>
<a href="https://www.mugo.ca/Blog/7-benefits-of-using-SASS-over-conventional-CSS">7 benefits of SASS</a><br>
</li>
<li>
<a href="https://www.devsaran.com/blog/10-best-reasons-use-bootstrap-amazing-web-designs">10 best reasons to use bootstrap</a><br>
</li>
<li>
<a href="https://scotch.io/@anitashah/what-problems-does-reactjs-solve-when-must-you-select-reactjs">what problems does reactjs solve</a><br>
</li>
</ol>
</div>
</div>
    </div>

  </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="/posts/javascript-object-oriented-programming/" class="u-url">javscript中的OOP特性</a></h1>
      <div class="metadata">
        

        
  <div class="date blur-1">
    <time class="published dt-published" datetime="2018-08-26T10:31:37+08:00" itemprop="datePublished" title="2018-08-26 10:31">Aug 26 2018  (10:31)
    </time>
</div>

        
    <div class="comment blur-1">
      
        
    <a href="/posts/javascript-object-oriented-programming/#disqus_thread" data-disqus-identifier="cache/posts/javascript-object-oriented-programming.html">Comments</a>


    </div>

        
    <div class="tags blur-2">
    <ul itemprop="keywords">
<li><a class="tag p-category" href="/tags/cpp/" rel="tag">cpp</a></li>
        <li><a class="tag p-category" href="/tags/javascript/" rel="tag">javascript</a></li>
        <li><a class="tag p-category" href="/tags/oop/" rel="tag">oop</a></li>
    </ul>
</div>

      </div>
    </header><div class="p-summary entry-summary">
      <div id="outline-container-orgdbbf956" class="outline-2">
<h2 id="orgdbbf956">
<span class="section-number-2">1</span> 引言</h2>
<div class="outline-text-2" id="text-1">
<p>
js也是具有OOP（object oriented programming）特性的，OOP在构建一些大型应用程序还是有一套成熟理论的。作为C++的使用者在学习js中的OOP特性的过程中，能够较快地理解其中的各种术语和概念，也能比较两种语言的异同，深化知识理解。通过js的OOP特性的学习也让我开始从语言层面考虑程序设计问题。<br>
本篇文章主要介绍了js中的一些OOP特性，并且比较了js与C++的语言特性。如果你能熟练掌握C++的OOP特性，本文能帮助你快速地对js中的OOP特性建立整体的认识。<br></p>
</div>
</div>

<div id="outline-container-orga229e8b" class="outline-2">
<h2 id="orga229e8b">
<span class="section-number-2">2</span> 写给C++使用者的js中的OOP特性介绍</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org48a00bb" class="outline-3">
<h3 id="org48a00bb">
<span class="section-number-3">2.1</span> 创建对象（object）</h3>
<div class="outline-text-3" id="text-2-1">
<p>
js中创建object的代码，示例如下：<br></p>
<div class="highlight"><pre><span></span>let duck = {
  name: "Aflac",
  numLegs: 2,
  sayName: function() {
    return "The name of this duck is " + this.name + ".";
  }
};
</pre></div>
<p>
js直接通过 <code>{}</code> 就可以创建出对象示例来，不需要对该对象（object）的类（class）进行声明。这点和C++不是很相同，C++需要先声明一个class再创建object。<br>
这个object有两个成员变量和一个成员函数，需要注意的是这两个成员变量都是公有（public）的，他们是可以直接用 <code>.</code> 符号访问的。<br>
js中也有 <code>this</code> 关键字，与C++相同， <code>this</code> 关键字用于表示当前实例。<br></p>
</div>
</div>

<div id="outline-container-org76f7a91" class="outline-3">
<h3 id="org76f7a91">
<span class="section-number-3">2.2</span> 类（class）的声明</h3>
<div class="outline-text-3" id="text-2-2">
<p>
js中声明一个类的操作实际上就是声明一个构造函数。<br></p>
<div class="highlight"><pre><span></span>let Bird = function(name, color) {
  this.name = name;
  this.color = color;
  this.numLegs = 2;
}

let crow = new Bird("Alexis", "black");

crow instanceof Bird; // =&gt; true
</pre></div>
<p>
上面的代码声明了Bird类，在js中通常类的名字都是由首字母大写的单词表示的。类的构造函数也能接受参数用于对实例的初始化，这点与C++非常相似，使用 <code>new</code> 关键字就能够创建该类的实例。<br>
使用 <code>instanceof</code> 关键字用于检查对象是否属于某个类，也可通过验证 <code>constructor</code> 属性来判断一个对象是否属于一个类 <code>crow.constructor == Bird</code> 。<br></p>
</div>
</div>

<div id="outline-container-org9040ab0" class="outline-3">
<h3 id="org9040ab0">
<span class="section-number-3">2.3</span> 类的共有成员</h3>
<div class="outline-text-3" id="text-2-3">
<p>
js中通过 <code>prototype</code> 这一属性（把它叫做关键字好像还不太合适）能够实现C++中静态成员变量和静态成员函数的特性。<br></p>
<div class="highlight"><pre><span></span>Bird.prototype.numLegs = 2;
</pre></div>
<p>
上面的代码就给Bird类增加了一个静态成员变量。这个 <code>prototype</code> 可以是一个对象，这样类的共有成员就能方便地承载更多的属性了，示例代码如下。<br></p>
<div class="highlight"><pre><span></span>Bird.prototype = {
  constructor: Bird,
  numLegs: 2,
  eat: function() {
    console.log("nom nom nom");
  },
  describe: function() {
    console.log("My name is " + this.name);
  }
};
</pre></div>
<p>
需要注意的是需要设置好 <code>constructor</code> 属性，这样是为了保证代码逻辑的一致性。<br>
对象会获得类的 <code>prototype</code> 属性，可以通过 <code>isPrototypeof</code> 方法来验证。<br></p>
<div class="highlight"><pre><span></span>Bird.prototype.isPrototypeOf(duck);
</pre></div>
</div>
</div>

<div id="outline-container-org50edf8c" class="outline-3">
<h3 id="org50edf8c">
<span class="section-number-3">2.4</span> 类的私有成员</h3>
<div class="outline-text-3" id="text-2-4">
<p>
js与C++一样，也可以有私有成员变量，代码如下所示。 <code>hatchedEgg</code> 就相当与是Bird的私有成员变量，并且提供了修改这个成员变量的方法 <code>getHatchedEggCount</code> 。<br></p>
<div class="highlight"><pre><span></span>function Bird() {
  let hatchedEgg = 10; // private property

  this.getHatchedEggCount = function() {
    // publicly available method that a bird object can use
    return hatchedEgg;
  };
}
let ducky = new Bird();
ducky.getHatchedEggCount(); // returns 10
</pre></div>
<p>
这种形式在js中被称作闭包（closure），函数能够访问到与他处在同一个作用域（context）中的变量。<br></p>
</div>
</div>

<div id="outline-container-org4a4a4de" class="outline-3">
<h3 id="org4a4a4de">
<span class="section-number-3">2.5</span> 类的继承和派生</h3>
<div class="outline-text-3" id="text-2-5">
<p>
js中的派生主要通过 <code>prototype</code> 体现，下面的代码表示Bird派生自Object。同样，需要注意将 <code>constructor</code> 属性设置好。<br></p>
<div class="highlight"><pre><span></span>Bird.prototype = Object.create(Animal.prototype);
Bird.prototype.constructor = Bird;
</pre></div>
</div>
</div>

<div id="outline-container-org833ec39" class="outline-3">
<h3 id="org833ec39">
<span class="section-number-3">2.6</span> 类的覆盖</h3>
<div class="outline-text-3" id="text-2-6">
<p>
js中可以重写基类中的方法，代码如下所示，这点与C++中的 <code>override</code> 相同。<br></p>
<div class="highlight"><pre><span></span>function Animal() { }
Animal.prototype.eat = function() {
  return "nom nom nom";
};
function Bird() { }

// Inherit all methods from Animal
Bird.prototype = Object.create(Animal.prototype);

// Bird.eat() overrides Animal.eat()
Bird.prototype.eat = function() {
  return "peck peck peck";
};

Bird.prototype.fly = function() {
  console.log("I'm flying!");
};
</pre></div>
<p>
通样也在派生之后也可以通过修改派生类的 <code>prototype</code> 以达到特化派生类的作用，上面的 <code>fly</code> 方法就是在Bird完成派生之后新增的方法。现在Bird有两个方法，它们分别是 <code>eat</code> 和 <code>fly</code> 。<br></p>
</div>
</div>
</div>


<div id="outline-container-orgfcc832c" class="outline-2">
<h2 id="orgfcc832c">
<span class="section-number-2">3</span> 参考资料</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>
<a href="https://learn.freecodecamp.org/javascript-algorithms-and-data-structures/object-oriented-programming/">FCC javascript oop tutorial</a><br>
</li>
</ul>
</div>
</div>
    </div>

  </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="/posts/regexp-cheetsheet/" class="u-url">正则表达式备忘</a></h1>
      <div class="metadata">
        

        
  <div class="date blur-1">
    <time class="published dt-published" datetime="2018-08-23T11:55:36+08:00" itemprop="datePublished" title="2018-08-23 11:55">Aug 23 2018  (11:55)
    </time>
</div>

        
    <div class="comment blur-1">
      
        
    <a href="/posts/regexp-cheetsheet/#disqus_thread" data-disqus-identifier="cache/posts/regexp-cheetsheet.html">Comments</a>


    </div>

        
    <div class="tags blur-2">
    <ul itemprop="keywords">
<li><a class="tag p-category" href="/tags/js/" rel="tag">js</a></li>
        <li><a class="tag p-category" href="/tags/lisp/" rel="tag">lisp</a></li>
        <li><a class="tag p-category" href="/tags/python/" rel="tag">python</a></li>
        <li><a class="tag p-category" href="/tags/regexp/" rel="tag">regexp</a></li>
    </ul>
</div>

      </div>
    </header><div class="p-summary entry-summary">
      <div id="outline-container-orged28d49" class="outline-2">
<h2 id="orged28d49">引言</h2>
<div class="outline-text-2" id="text-orged28d49">
<p>
近在FreeCodeCamp(FCC)学习前端的课程，其中有一节就是讲的 <code>regexp</code> ，也就是正则表达式，之前我零星地了解过一些正则表达式的相关知识，不足以对正则表达式得出一个完整的认识。FCC的教程循序渐进，由简到繁，在教学中结合练习，非常适合初学者的学习过程。如何你的英文能够达到阅读技术类文献的水平，又正好想学习一下正则表达式，我推荐你试一下FCC的正则表达式教程，花3~4个小时就能够对正则表达式有个完整的理解。<br></p>

<p>
本篇文章主要是对学习过程中的知识点进行总结，方便以后进行查阅。<br></p>
</div>
</div>

<div id="outline-container-org8d327cb" class="outline-2">
<h2 id="org8d327cb">要点总结（js版）</h2>
<div class="outline-text-2" id="text-org8d327cb">
<p>
FCC的教程使用javascript作为开发语言，本节所有的代码都是js代码。<br></p>

<p>
js中内置了正则表达式模块，下面是正则表达式在js中的使用示例<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">myString</span> <span class="o">=</span> <span class="s2">"Hello World"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">myRegex</span> <span class="o">=</span> <span class="sr">/Hello/</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">myRegex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">myString</span><span class="p">);</span>
</pre></div>

<p>
使用 <code>|</code> 进行or匹配<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">regex2</span> <span class="o">=</span> <span class="sr">/cat|bird/</span><span class="p">;</span>
</pre></div>


<p>
使用 <code>i</code> 标识符在匹配时忽略大小写<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">regex3</span> <span class="o">=</span> <span class="sr">/case/i</span><span class="p">;</span>
</pre></div>


<p>
使用正则表达式进行字符串过滤，使用 <code>match</code> 方法<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">extractStr</span> <span class="o">=</span> <span class="s2">"Extract the word 'coding' from this string."</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">codingRegex</span> <span class="o">=</span> <span class="sr">/coding/</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">extractStr</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">codingRegex</span><span class="p">);</span> <span class="c1">// Change this line</span>
</pre></div>


<p>
使用 <code>g</code> 进行返回满足规则的多次结果， <code>g</code> 为global的缩写<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">twinkleStar</span> <span class="o">=</span> <span class="s2">"Twinkle, twinkle, little star"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">starRegex</span> <span class="o">=</span> <span class="sr">/twinkle/gi</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">twinkleStar</span><span class="p">;</span> <span class="c1">// Change this line</span>
</pre></div>


<p>
使用 <code>.</code> 匹配所有的字符，使用 <code>[]</code> 匹配指定的字符<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">quoteSample</span> <span class="o">=</span> <span class="s2">"Beware of bugs in the above code; I have only proved it correct, not tried it."</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">vowelRegex</span> <span class="o">=</span> <span class="sr">/[aeiou]/gi</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">quoteSample</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">vowelRegex</span><span class="p">);</span> <span class="c1">// Change this line</span>
</pre></div>

<p>
在 <code>[]</code> 中可以使用 <code>-</code> 代表一个范围<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">quoteSample2</span> <span class="o">=</span> <span class="s2">"The quick brown fox jumps over the lazy dog."</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">alphabetRegex</span> <span class="o">=</span> <span class="sr">/[a-z]/gi</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">quoteSample2</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">alphabetRegex</span><span class="p">);</span> <span class="c1">// Change this line</span>
</pre></div>


<p>
这个范围还可以是多个，并且允许包含数字<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">quoteSample3</span> <span class="o">=</span> <span class="s2">"Blueberry 3.141592653s are delicious."</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">myRegex</span> <span class="o">=</span> <span class="sr">/[h-s2-6]/gi</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">quoteSample3</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">myRegex</span><span class="p">);</span> <span class="c1">// Change this line</span>
</pre></div>


<p>
使用 <code>^</code> 符号能够匹配不包含某些字符<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">quoteSample4</span> <span class="o">=</span> <span class="s2">"3 blind mice."</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">myRegex2</span> <span class="o">=</span> <span class="sr">/[^0-9aeiou]/gi</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span>  <span class="nx">result</span> <span class="o">=</span> <span class="nx">quoteSample4</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">myRegex2</span><span class="p">);</span> <span class="c1">// Change this line</span>
</pre></div>


<p>
使用 <code>+</code> 对出现连续出现的字符进行匹配<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">difficultSpelling</span> <span class="o">=</span> <span class="s2">"Mississippi"</span><span class="p">;</span>
<span class="kd">let</span>  <span class="nx">myRegex3</span> <span class="o">=</span> <span class="sr">/s+/g</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">difficultSpelling</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">myRegex3</span><span class="p">);</span>
</pre></div>


<p>
使用 <code>*</code> 星号匹配可能没有出现的次数（出现次数为 0~n 次）<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">chewieQuote</span> <span class="o">=</span> <span class="s2">"Aaaaaaaaaaaaaaaarrrgh!"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">chewieRegex</span> <span class="o">=</span> <span class="sr">/Aa*/</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">chewieQuote</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">chewieRegex</span><span class="p">);</span>
</pre></div>


<p>
使用 <code>?</code> 进行较短匹配 （lazy match, 与greedy match 对应）<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">text</span> <span class="o">=</span> <span class="s2">"&lt;h1&gt;Winter is coming&lt;/h1&gt;"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">myRegex</span> <span class="o">=</span> <span class="sr">/&lt;.*?&gt;/</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">myRegex</span><span class="p">);</span>
</pre></div>


<p>
使用 <code>^</code> 对出现在字符串开始位置进行匹配<br>
注意上边也用到这个符号表示取反，是在 <code>[]</code> 中表示取反<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">rickyAndCal</span> <span class="o">=</span> <span class="s2">"Cal and Ricky both like racing."</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">calRegex</span> <span class="o">=</span> <span class="sr">/^Cal/</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">calRegex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">rickyAndCal</span><span class="p">);</span>
</pre></div>


<p>
使用 <code>$</code> 对出现在字符串结束位置进行匹配<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">caboose</span> <span class="o">=</span> <span class="s2">"The last car on a train is the caboose"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">lastRegex</span> <span class="o">=</span> <span class="sr">/caboose$/</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">lastRegex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">caboose</span><span class="p">);</span>
</pre></div>


<p>
使用 <code>\w</code> 代替 <code>[A-Za-z0-9_]</code> ，包含所有的数字、字母和下划线<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">quoteSample</span> <span class="o">=</span> <span class="s2">"The five boxing wizards jump quickly."</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">alphabetRegexV2</span> <span class="o">=</span> <span class="sr">/\w/g</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">quoteSample</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">alphabetRegexV2</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
</pre></div>


<p>
使用 <code>\W</code> 代替 <code>[^A-Za-z0-9_]</code> ，相当于上边的逆向匹配<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">quoteSample</span> <span class="o">=</span> <span class="s2">"The five boxing wizards jump quickly."</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">nonAlphabetRegex</span> <span class="o">=</span> <span class="sr">/\W/g</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">quoteSample</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">nonAlphabetRegex</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
</pre></div>


<p>
使用 <code>\d</code> 代替 <code>[0-9]</code> ，所有数字匹配<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">numString</span> <span class="o">=</span> <span class="s2">"Your sandwich will be $5.00"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">numRegex</span> <span class="o">=</span> <span class="sr">/\d/g</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">numString</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">numRegex</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
</pre></div>


<p>
使用 <code>\D</code> 代替 <code>[^0-9]</code> ，所有非数字匹配<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">numString</span> <span class="o">=</span> <span class="s2">"Your sandwich will be $5.00"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">noNumRegex</span> <span class="o">=</span> <span class="sr">/\D/g</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">numString</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">noNumRegex</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
</pre></div>


<p>
使用 <code>\s</code> 代替 <code>[ \r\t\f\n\v]</code> ，与空格和换行相关<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">sample</span> <span class="o">=</span> <span class="s2">"Whitespace is important in separating words"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">countWhiteSpace</span> <span class="o">=</span> <span class="sr">/\s/g</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">sample</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">countWhiteSpace</span><span class="p">);</span>
</pre></div>


<p>
使用 <code>\S=，代替 =[^ \r\t\f\n\v]</code> ，不包含空格和换行<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">sample</span> <span class="o">=</span> <span class="s2">"Whitespace is important in separating words"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">countNonWhiteSpace</span> <span class="o">=</span> <span class="sr">/\S/g</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">sample</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">countNonWhiteSpace</span><span class="p">);</span>
</pre></div>


<p>
使用 <code>{min, max}</code> 对字符出现的次数进行限定<br>
回想起使用 <code>+</code> 限制次数为 <code>{0,}</code> ，使用 <code>-</code> 限制次数为 <code>{1,}</code><br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">ohStr</span> <span class="o">=</span> <span class="s2">"Ohhh no"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">ohRegex</span> <span class="o">=</span> <span class="sr">/Oh{3,6} no/</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">ohRegex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">ohStr</span><span class="p">);</span>
</pre></div>


<p>
仅限制出现次数的下限 <code>{min,}</code><br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">haStr</span> <span class="o">=</span> <span class="s2">"Hazzzzah"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">haRegex</span> <span class="o">=</span> <span class="sr">/Haz{4,}ah/</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">haRegex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">haStr</span><span class="p">);</span>
</pre></div>


<p>
指定出现的次数 <code>{count}</code><br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">timStr</span> <span class="o">=</span> <span class="s2">"Timmmmber"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">timRegex</span> <span class="o">=</span> <span class="sr">/Tim{4}ber/</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">timRegex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">timStr</span><span class="p">);</span>
</pre></div>


<p>
使用 <code>?</code> 匹配可能出现的字母<br>
问号用于声明lazy match，如何判断是lazy match还是匹配可能出现的东西呢<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">favWord</span> <span class="o">=</span> <span class="s2">"favorite"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">favRegex</span> <span class="o">=</span> <span class="sr">/favou?rite/</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">favRegex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">favWord</span><span class="p">);</span>
</pre></div>



<p>
lookahead 的概念， <code>(?=...)</code> 与 <code>(?!...)</code><br></p>

<p>
下面的正则表达式用于检查密码，由3~6个字母和至少1个数字组成<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">password</span> <span class="o">=</span> <span class="s2">"abc123"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">checkPass</span> <span class="o">=</span> <span class="sr">/(?=\w{3,6})(?=\D*\d)/</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">checkPass</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">password</span><span class="p">);</span> <span class="c1">// Returns true</span>
</pre></div>

<p>
下面的正则表达式用于检查密码，有5个以上的字符和至少2个数字组成<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">sampleWord</span> <span class="o">=</span> <span class="s2">"astronaut"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">pwRegex</span> <span class="o">=</span> <span class="sr">/(?=\w{5,})(?=\D*\d{2,})/</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">pwRegex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">sampleWord</span><span class="p">);</span>
</pre></div>


<p>
截取字符串中的重复部分，使用括号 () 对内容进行补充，是用 \1 表示第一个捕捉到的字符<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">repeatNum</span> <span class="o">=</span> <span class="s2">"42 42 42"</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">reRegex</span> <span class="o">=</span> <span class="sr">/^(\d*)\s\1\s\1$/</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">reRegex</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">repeatNum</span><span class="p">);</span>
</pre></div>


<p>
通过截取字符串，可以对截取的字符串进行修改或替换操作，需要使用 <code>replace</code> 方法<br></p>
<div class="highlight"><pre><span></span><span class="s2">"Code Camp"</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(\w+)\s(\w+)/</span><span class="p">,</span> <span class="s1">'$2 $1'</span><span class="p">);</span> <span class="c1">// Returns "Camp Code"</span>
</pre></div>

<p>
下面的正则表达式就是用于将 <code>good</code> 替换为 <code>okey-dokey</code><br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">huhText</span> <span class="o">=</span> <span class="s2">"This sandwich is good."</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">fixRegex</span> <span class="o">=</span> <span class="sr">/good/</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">replaceText</span> <span class="o">=</span> <span class="s2">"okey-dokey"</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">huhText</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">fixRegex</span><span class="p">,</span> <span class="nx">replaceText</span><span class="p">);</span>
</pre></div>

<p>
使用正则表达式实现类似 <code>.trim()</code> 的功能<br></p>
<div class="highlight"><pre><span></span><span class="kd">let</span> <span class="nx">hello</span> <span class="o">=</span> <span class="s2">"   Hello, World!  "</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">wsRegex</span> <span class="o">=</span> <span class="sr">/^\s+|\s+$/g</span><span class="p">;</span> <span class="c1">// Change this line</span>
<span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">hello</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">wsRegex</span><span class="p">,</span> <span class="s1">''</span><span class="p">);</span> <span class="c1">// Change this line</span>
</pre></div>
</div>
</div>

<div id="outline-container-org4c48b5d" class="outline-2">
<h2 id="org4c48b5d">elisp和python中的正则表达式</h2>
<div class="outline-text-2" id="text-org4c48b5d">
<p>
在emacs中内置了 <code>string-match</code> 函数进行正则表达式匹配，其函数原型为 <code>(string-match REGEXP STRING &amp;optional START)</code> ，下面就是在emacs中使用regexp的示例。<br></p>
<div class="highlight"><pre><span></span><span class="p">(</span><span class="nf">setq</span> <span class="nv">str-regexp</span> <span class="s">"\.[h|cpp]$"</span><span class="p">)</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">str-sample-1</span> <span class="s">"sample1.h"</span><span class="p">)</span>
<span class="p">(</span><span class="nf">string-match</span> <span class="nv">str-regexp</span> <span class="nv">str-sample-1</span><span class="p">)</span>
</pre></div>

<p>
python中内置了 <code>re</code> 模块用于正则表达式匹配，下面就是在python中的regexp示例。<br></p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">"Cookie"</span>
<span class="n">sequence</span> <span class="o">=</span> <span class="s2">"Cookie"</span>
<span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">sequence</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"Match!"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"Not a match!"</span><span class="p">)</span>
</pre></div>
</div>
</div>


<div id="outline-container-org3d2486a" class="outline-2">
<h2 id="org3d2486a">参考资料</h2>
<div class="outline-text-2" id="text-org3d2486a">
<ul class="org-ul">
<li>
<a href="https://learn.freecodecamp.org/javascript-algorithms-and-data-structures/regular-expressions">FCC regular-expression tutorial</a><br>
</li>
<li>
<a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Simple-Match-Data.html">emacs string-match manual</a><br>
</li>
<li>
<a href="https://docs.python.org/3/library/re.html">python re module</a><br>
</li>
</ul>
</div>
</div>
    </div>

  </article>
</div>



        
       <script>var disqus_shortname="samsonwang-me";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>

      <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 sidebar">
       
<div class="sidebar-module sidebar-module-inset">
  <h4>About Me</h4>
  
        <div class="sidebar-aboutme">
        <p>Zeal for coding, C++ developer. Focus on linux server dev. I use EMACS, and I am learning python.</p>
        <p>View my code on <a href="https://github.com/samsonwang"> Github</a></p>
</div>
</div>

       
<div class="sidebar-module">
  <h4>Categories</h4>
  
        <ol class="list-unstyled sidebar-category">
<li>
<a href="/tags/category-cpp/">cpp</a>
        </li>
<li>
<a href="/tags/category-emacs/">emacs</a>
        </li>
<li>
<a href="/tags/category-linux/">linux</a>
        </li>
<li>
<a href="/tags/category-windows/">windows</a>
        </li>
</ol>
</div>

      </div>
<!--.sidebar-->
    </div>
<!--.row-->

    

        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="/index-1.html" rel="prev">Newer posts</a>
            </li>
            <li class="previous">
                <a href="/index-3.html" rel="next">Older posts</a>
            </li>
        </ul></nav><!--End of body content--><footer id="footer"><div class="text-center">
<p>Contents © 2017-2018 <a href="mailto:wangzhilv@gmail.com">Samson Wang</a>
 - Powered by <a href="https://getnikola.com/" rel="nofollow">Nikola</a>
 - Hosted on <a href="https://pages.github.com/" rel="nofollow">Github Pages</a>
 - 
<a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/"><img alt="知识共享许可协议" style="padding-bottom:2px" src="https://i.creativecommons.org/l/by-nc/4.0/80x15.png"></a>
</p>
</div>

      
    </footer>
</div>
</div>

<div id="scroll-top" title="back to top">
  <div id="scroll-top-arrow"></div>
  <div id="scroll-top-stick"></div>
</div>


            <script src="/assets/js/jquery.min.js"></script><script src="/assets/js/jquery.colorbox-min.js"></script><script src="/assets/js/jquery.lazyload.min.js"></script><script src="/assets/js/popper.min.js"></script><script src="/assets/js/bootstrap.min.js"></script><script src="/assets/js/moment-with-locales.min.js"></script><script src="/assets/js/fancydates.js"></script><script src="/assets/js/cerulean.js"></script><!-- fancy dates --><script>
  moment.locale("en");
  fancydates(0, "YYYY-MM-DD HH:mm");
</script><!-- end fancy dates --><!-- Baidu Analytics --><script>
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?7ec47c52179b8ca4f9aee81282bd7b20";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
</body>
</html>
